"use strict";(()=>{var e={};e.id=943,e.ids=[943],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7441:e=>{e.exports=require("sharp")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},43:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>g});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>d});var o=r(5419),a=r(9108),i=r(9678),n=r(8070),u=r(4576);async function p(e,{params:t}){let r=t.id;if(!r)return n.Z.json({error:"Event ID is required"},{status:400});try{let e=await u.F.getEventPhotos(r);return n.Z.json(e)}catch(e){return console.error("Get photos error:",e),n.Z.json({error:"Failed to fetch event photos",details:e.message},{status:500})}}async function d(e,{params:t}){try{let r=t.id,s=await e.formData(),o=s.get("file"),a=s.get("uploaderName")||"Anonymous",i=s.get("albumName")||"Tamu";if(!r)return n.Z.json({message:"Event ID is required"},{status:400});if(!o)return n.Z.json({message:"No file uploaded"},{status:400});if(!o.type.startsWith("image/"))return n.Z.json({message:"Only image files are allowed"},{status:400});if(o.size>10485760)return n.Z.json({message:"File size must be less than 10MB"},{status:400});if(!["Official","Tamu","Bridesmaid"].includes(i))return n.Z.json({message:"Invalid album name"},{status:400});let p=await u.F.uploadEventPhoto(r,o,a,i);if(!p)throw Error("Failed to create photo record");return n.Z.json(p,{status:201})}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";return n.Z.json({message:`Failed to upload photo: ${e}`,details:void 0},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/events/[id]/photos/route",pathname:"/api/events/[id]/photos",filename:"route",bundlePath:"app/api/events/[id]/photos/route"},resolvedPagePath:"C:\\Users\\Administrator\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\hafi-portrait-stable\\src\\app\\api\\events\\[id]\\photos\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:h,headerHooks:f,staticGenerationBailout:g}=l,v="/api/events/[id]/photos/route";function x(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,206,971,763],()=>r(43));module.exports=s})();