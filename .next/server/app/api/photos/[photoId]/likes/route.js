(()=>{var e={};e.id=439,e.ids=[439],e.modules={517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8359:()=>{},3739:()=>{},9640:(e,t,s)=>{"use strict";s.r(t),s.d(t,{headerHooks:()=>m,originalPathname:()=>x,patchFetch:()=>k,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>h,staticGenerationBailout:()=>I});var r={};s.r(r),s.d(r,{PATCH:()=>n});var o=s(5419),i=s(9108),u=s(9678),a=s(8070),p=s(6517);async function n(e,{params:t}){try{let s=t.photoId,{likes:r}=await e.json();if("number"!=typeof r)return a.Z.json({message:"Likes must be a number"},{status:400});let{data:o,error:i}=await p.pR.from("photos").update({likes:r}).eq("id",s).select().single();if(i)throw Error(`Update likes failed: ${i.message}`);if(!o)return a.Z.json({message:"Photo not found"},{status:404});return a.Z.json(o)}catch(e){return console.error("Update photo likes error:",e),a.Z.json({message:"Failed to update likes",error:e.message},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/photos/[photoId]/likes/route",pathname:"/api/photos/[photoId]/likes",filename:"route",bundlePath:"app/api/photos/[photoId]/likes/route"},resolvedPagePath:"/home/devbox/hafi-portrait-stable/src/app/api/photos/[photoId]/likes/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:h,serverHooks:l,headerHooks:m,staticGenerationBailout:I}=c,x="/api/photos/[photoId]/likes/route";function k(){return(0,u.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:h})}},6517:(e,t,s)=>{"use strict";s.d(t,{$6:()=>u,OQ:()=>o,pR:()=>i});var r=s(1971);let o=(0,r.eI)("https://azspktldiblhrwebzmwq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6c3BrdGxkaWJsaHJ3ZWJ6bXdxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5NDQwNDQsImV4cCI6MjA2OTUyMDA0NH0.uKHB4K9hxUDTc0ZkwidCJv_Ev-oa99AflFvrFt_8MG8"),i=(0,r.eI)("https://azspktldiblhrwebzmwq.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}}),u=process.env.SUPABASE_STORAGE_BUCKET||"photos"}};var t=require("../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,206,971],()=>s(9640));module.exports=r})();