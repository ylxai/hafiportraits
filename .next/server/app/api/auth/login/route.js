/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/login/route";
exports.ids = ["app/api/auth/login/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Administrator_nana_cursor_admin_dashboard_gallery_feature_enhancement_a647_hafi_portrait_stable_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/auth/login/route.ts */ \"(rsc)/./src/app/api/auth/login/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/login/route\",\n        pathname: \"/api/auth/login\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/login/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Administrator\\\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\\\hafi-portrait-stable\\\\src\\\\app\\\\api\\\\auth\\\\login\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Administrator_nana_cursor_admin_dashboard_gallery_feature_enhancement_a647_hafi_portrait_stable_src_app_api_auth_login_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/auth/login/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGbG9naW4lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkZsb2dpbiUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBZG1pbmlzdHJhdG9yJTVDbmFuYS1jdXJzb3ItYWRtaW4tZGFzaGJvYXJkLWdhbGxlcnktZmVhdHVyZS1lbmhhbmNlbWVudC1hNjQ3JTVDaGFmaS1wb3J0cmFpdC1zdGFibGUlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0FkbWluaXN0cmF0b3IlNUNuYW5hLWN1cnNvci1hZG1pbi1kYXNoYm9hcmQtZ2FsbGVyeS1mZWF0dXJlLWVuaGFuY2VtZW50LWE2NDclNUNoYWZpLXBvcnRyYWl0LXN0YWJsZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNrRztBQUMvSztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhZmlwb3J0cmFpdC1uZXh0anMvP2RhNTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcQWRtaW5pc3RyYXRvclxcXFxuYW5hLWN1cnNvci1hZG1pbi1kYXNoYm9hcmQtZ2FsbGVyeS1mZWF0dXJlLWVuaGFuY2VtZW50LWE2NDdcXFxcaGFmaS1wb3J0cmFpdC1zdGFibGVcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYXV0aFxcXFxsb2dpblxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9sb2dpbi9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2F1dGgvbG9naW5cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvbG9naW4vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxBZG1pbmlzdHJhdG9yXFxcXG5hbmEtY3Vyc29yLWFkbWluLWRhc2hib2FyZC1nYWxsZXJ5LWZlYXR1cmUtZW5oYW5jZW1lbnQtYTY0N1xcXFxoYWZpLXBvcnRyYWl0LXN0YWJsZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxhdXRoXFxcXGxvZ2luXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvbG9naW4vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/auth/login/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/auth/login/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/**\n * Admin Login API Endpoint\n * POST /api/auth/login\n */ \n\n\nasync function POST(request) {\n    try {\n        const { username, password } = await request.json();\n        // Validate input\n        if (!username || !password) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Username and password are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get client info\n        const ipAddress = request.ip || request.headers.get(\"x-forwarded-for\") || \"unknown\";\n        const userAgent = request.headers.get(\"user-agent\") || \"unknown\";\n        // Authenticate user\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.authenticateUser)({\n            username,\n            password\n        });\n        if (!user) {\n            // Log failed login attempt\n            await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.logActivity)(0, \"login_failed\", \"auth\", username, {\n                reason: \"invalid_credentials\"\n            }, ipAddress, userAgent);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Invalid username or password\"\n            }, {\n                status: 401\n            });\n        }\n        // Create session\n        const sessionId = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.createSession)(user.id, ipAddress, userAgent);\n        // Log successful login\n        await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.logActivity)(user.id, \"login_success\", \"auth\", user.username, {\n            ip_address: ipAddress\n        }, ipAddress, userAgent);\n        // Set session cookie\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n        cookieStore.set(\"admin_session\", sessionId, {\n            httpOnly: true,\n            secure: \"development\" === \"production\",\n            sameSite: \"lax\",\n            maxAge: 24 * 60 * 60,\n            path: \"/\"\n        });\n        // Return user data (without sensitive info)\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            user: {\n                id: user.id,\n                username: user.username,\n                email: user.email,\n                full_name: user.full_name,\n                role: user.role\n            },\n            message: \"Login successful\"\n        });\n    } catch (error) {\n        console.error(\"Login error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hdXRoL2xvZ2luL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7O0NBR0MsR0FFdUQ7QUFDa0I7QUFDbkM7QUFFaEMsZUFBZUssS0FBS0MsT0FBb0I7SUFDN0MsSUFBSTtRQUNGLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUUsR0FBRyxNQUFNRixRQUFRRyxJQUFJO1FBRWpELGlCQUFpQjtRQUNqQixJQUFJLENBQUNGLFlBQVksQ0FBQ0MsVUFBVTtZQUMxQixPQUFPUixrRkFBWUEsQ0FBQ1MsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFxQyxHQUM5QztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsa0JBQWtCO1FBQ2xCLE1BQU1DLFlBQVlOLFFBQVFPLEVBQUUsSUFBSVAsUUFBUVEsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCO1FBQzFFLE1BQU1DLFlBQVlWLFFBQVFRLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQjtRQUV2RCxvQkFBb0I7UUFDcEIsTUFBTUUsT0FBTyxNQUFNaEIsMkRBQWdCQSxDQUFDO1lBQUVNO1lBQVVDO1FBQVM7UUFFekQsSUFBSSxDQUFDUyxNQUFNO1lBQ1QsMkJBQTJCO1lBQzNCLE1BQU1kLHNEQUFXQSxDQUNmLEdBQ0EsZ0JBQ0EsUUFDQUksVUFDQTtnQkFBRVcsUUFBUTtZQUFzQixHQUNoQ04sV0FDQUk7WUFHRixPQUFPaEIsa0ZBQVlBLENBQUNTLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBK0IsR0FDeEM7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGlCQUFpQjtRQUNqQixNQUFNUSxZQUFZLE1BQU1qQix3REFBYUEsQ0FBQ2UsS0FBS0csRUFBRSxFQUFFUixXQUFXSTtRQUUxRCx1QkFBdUI7UUFDdkIsTUFBTWIsc0RBQVdBLENBQ2ZjLEtBQUtHLEVBQUUsRUFDUCxpQkFDQSxRQUNBSCxLQUFLVixRQUFRLEVBQ2I7WUFBRWMsWUFBWVQ7UUFBVSxHQUN4QkEsV0FDQUk7UUFHRixxQkFBcUI7UUFDckIsTUFBTU0sY0FBY2xCLHFEQUFPQTtRQUMzQmtCLFlBQVlDLEdBQUcsQ0FBQyxpQkFBaUJKLFdBQVc7WUFDMUNLLFVBQVU7WUFDVkMsUUFBUUMsa0JBQXlCO1lBQ2pDQyxVQUFVO1lBQ1ZDLFFBQVEsS0FBSyxLQUFLO1lBQ2xCQyxNQUFNO1FBQ1I7UUFFQSw0Q0FBNEM7UUFDNUMsT0FBTzdCLGtGQUFZQSxDQUFDUyxJQUFJLENBQUM7WUFDdkJxQixTQUFTO1lBQ1RiLE1BQU07Z0JBQ0pHLElBQUlILEtBQUtHLEVBQUU7Z0JBQ1hiLFVBQVVVLEtBQUtWLFFBQVE7Z0JBQ3ZCd0IsT0FBT2QsS0FBS2MsS0FBSztnQkFDakJDLFdBQVdmLEtBQUtlLFNBQVM7Z0JBQ3pCQyxNQUFNaEIsS0FBS2dCLElBQUk7WUFDakI7WUFDQUMsU0FBUztRQUNYO0lBRUYsRUFBRSxPQUFPeEIsT0FBTztRQUNkeUIsUUFBUXpCLEtBQUssQ0FBQyxnQkFBZ0JBO1FBQzlCLE9BQU9WLGtGQUFZQSxDQUFDUyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWZpcG9ydHJhaXQtbmV4dGpzLy4vc3JjL2FwcC9hcGkvYXV0aC9sb2dpbi9yb3V0ZS50cz9kMzFhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQWRtaW4gTG9naW4gQVBJIEVuZHBvaW50XG4gKiBQT1NUIC9hcGkvYXV0aC9sb2dpblxuICovXG5cbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBhdXRoZW50aWNhdGVVc2VyLCBjcmVhdGVTZXNzaW9uLCBsb2dBY3Rpdml0eSB9IGZyb20gJ0AvbGliL2F1dGgnO1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRcbiAgICBpZiAoIXVzZXJuYW1lIHx8ICFwYXNzd29yZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVXNlcm5hbWUgYW5kIHBhc3N3b3JkIGFyZSByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCBjbGllbnQgaW5mb1xuICAgIGNvbnN0IGlwQWRkcmVzcyA9IHJlcXVlc3QuaXAgfHwgcmVxdWVzdC5oZWFkZXJzLmdldCgneC1mb3J3YXJkZWQtZm9yJykgfHwgJ3Vua25vd24nO1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ3VzZXItYWdlbnQnKSB8fCAndW5rbm93bic7XG5cbiAgICAvLyBBdXRoZW50aWNhdGUgdXNlclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoZW50aWNhdGVVc2VyKHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0pO1xuICAgIFxuICAgIGlmICghdXNlcikge1xuICAgICAgLy8gTG9nIGZhaWxlZCBsb2dpbiBhdHRlbXB0XG4gICAgICBhd2FpdCBsb2dBY3Rpdml0eShcbiAgICAgICAgMCwgLy8gTm8gdXNlciBJRCBmb3IgZmFpbGVkIGF0dGVtcHRzXG4gICAgICAgICdsb2dpbl9mYWlsZWQnLFxuICAgICAgICAnYXV0aCcsXG4gICAgICAgIHVzZXJuYW1lLFxuICAgICAgICB7IHJlYXNvbjogJ2ludmFsaWRfY3JlZGVudGlhbHMnIH0sXG4gICAgICAgIGlwQWRkcmVzcyxcbiAgICAgICAgdXNlckFnZW50XG4gICAgICApO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHNlc3Npb25cbiAgICBjb25zdCBzZXNzaW9uSWQgPSBhd2FpdCBjcmVhdGVTZXNzaW9uKHVzZXIuaWQsIGlwQWRkcmVzcywgdXNlckFnZW50KTtcblxuICAgIC8vIExvZyBzdWNjZXNzZnVsIGxvZ2luXG4gICAgYXdhaXQgbG9nQWN0aXZpdHkoXG4gICAgICB1c2VyLmlkLFxuICAgICAgJ2xvZ2luX3N1Y2Nlc3MnLFxuICAgICAgJ2F1dGgnLFxuICAgICAgdXNlci51c2VybmFtZSxcbiAgICAgIHsgaXBfYWRkcmVzczogaXBBZGRyZXNzIH0sXG4gICAgICBpcEFkZHJlc3MsXG4gICAgICB1c2VyQWdlbnRcbiAgICApO1xuXG4gICAgLy8gU2V0IHNlc3Npb24gY29va2llXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgY29va2llU3RvcmUuc2V0KCdhZG1pbl9zZXNzaW9uJywgc2Vzc2lvbklkLCB7XG4gICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgIG1heEFnZTogMjQgKiA2MCAqIDYwLCAvLyAyNCBob3Vyc1xuICAgICAgcGF0aDogJy8nXG4gICAgfSk7XG5cbiAgICAvLyBSZXR1cm4gdXNlciBkYXRhICh3aXRob3V0IHNlbnNpdGl2ZSBpbmZvKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICBmdWxsX25hbWU6IHVzZXIuZnVsbF9uYW1lLFxuICAgICAgICByb2xlOiB1c2VyLnJvbGVcbiAgICAgIH0sXG4gICAgICBtZXNzYWdlOiAnTG9naW4gc3VjY2Vzc2Z1bCdcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0xvZ2luIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhdXRoZW50aWNhdGVVc2VyIiwiY3JlYXRlU2Vzc2lvbiIsImxvZ0FjdGl2aXR5IiwiY29va2llcyIsIlBPU1QiLCJyZXF1ZXN0IiwidXNlcm5hbWUiLCJwYXNzd29yZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImlwQWRkcmVzcyIsImlwIiwiaGVhZGVycyIsImdldCIsInVzZXJBZ2VudCIsInVzZXIiLCJyZWFzb24iLCJzZXNzaW9uSWQiLCJpZCIsImlwX2FkZHJlc3MiLCJjb29raWVTdG9yZSIsInNldCIsImh0dHBPbmx5Iiwic2VjdXJlIiwicHJvY2VzcyIsInNhbWVTaXRlIiwibWF4QWdlIiwicGF0aCIsInN1Y2Nlc3MiLCJlbWFpbCIsImZ1bGxfbmFtZSIsInJvbGUiLCJtZXNzYWdlIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/auth/login/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   cleanupExpiredSessions: () => (/* binding */ cleanupExpiredSessions),\n/* harmony export */   createDefaultAdminUsers: () => (/* binding */ createDefaultAdminUsers),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   destroySession: () => (/* binding */ destroySession),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   initializeAuth: () => (/* binding */ initializeAuth),\n/* harmony export */   logActivity: () => (/* binding */ logActivity),\n/* harmony export */   validateSession: () => (/* binding */ validateSession),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/**\n * Authentication Utilities\n * HafiPortrait Admin Authentication System\n */ \n\n\n// Create Supabase client with service role key for admin operations\nconst supabaseUrl = \"https://azspktldiblhrwebzmwq.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\nconst JWT_SECRET = process.env.JWT_SECRET || \"hafiportrait-secret-key-change-in-production\";\nconst SESSION_DURATION = 24 * 60 * 60 * 1000; // 24 hours\n/**\n * Hash password using bcrypt\n */ async function hashPassword(password) {\n    const saltRounds = 12;\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, saltRounds);\n}\n/**\n * Verify password against hash\n */ async function verifyPassword(password, hash) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hash);\n}\n/**\n * Generate JWT token\n */ function generateToken(userId, username) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        userId,\n        username\n    }, JWT_SECRET, {\n        expiresIn: \"24h\"\n    });\n}\n/**\n * Verify JWT token\n */ function verifyToken(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        return {\n            userId: decoded.userId,\n            username: decoded.username\n        };\n    } catch (error) {\n        return null;\n    }\n}\n/**\n * Create admin users with hashed passwords\n */ async function createDefaultAdminUsers() {\n    const defaultUsers = [\n        {\n            username: \"hafi\",\n            password: \"Hantu@112233\",\n            email: \"hafi@hafiportrait.com\",\n            full_name: \"Hafi Portrait\"\n        },\n        {\n            username: \"nandika\",\n            password: \"Hantu@112233\",\n            email: \"nandika@hafiportrait.com\",\n            full_name: \"Nandika\"\n        }\n    ];\n    for (const user of defaultUsers){\n        try {\n            // Check if user already exists\n            const { data: existingUser } = await supabaseAdmin.from(\"admin_users\").select(\"id\").eq(\"username\", user.username).single();\n            if (!existingUser) {\n                const hashedPassword = await hashPassword(user.password);\n                const { error } = await supabaseAdmin.from(\"admin_users\").insert({\n                    username: user.username,\n                    password_hash: hashedPassword,\n                    email: user.email,\n                    full_name: user.full_name,\n                    role: \"superadmin\"\n                });\n                if (error) {\n                    console.error(`Error creating user ${user.username}:`, error);\n                } else {\n                    console.log(`✅ Created superadmin user: ${user.username}`);\n                }\n            } else {\n                console.log(`ℹ️ User ${user.username} already exists`);\n            }\n        } catch (error) {\n            console.error(`Error processing user ${user.username}:`, error);\n        }\n    }\n}\n/**\n * Authenticate user with username and password\n */ async function authenticateUser(credentials) {\n    try {\n        const { data: user, error } = await supabaseAdmin.from(\"admin_users\").select(\"*\").eq(\"username\", credentials.username).eq(\"is_active\", true).single();\n        if (error || !user) {\n            return null;\n        }\n        const isValidPassword = await verifyPassword(credentials.password, user.password_hash);\n        if (!isValidPassword) {\n            return null;\n        }\n        // Update last login\n        await supabaseAdmin.from(\"admin_users\").update({\n            last_login: new Date().toISOString()\n        }).eq(\"id\", user.id);\n        // Return user without password hash\n        const { password_hash, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Authentication error:\", error);\n        return null;\n    }\n}\n/**\n * Create session for authenticated user\n */ async function createSession(userId, ipAddress, userAgent) {\n    const sessionId = generateSessionId();\n    const expiresAt = new Date(Date.now() + SESSION_DURATION).toISOString();\n    const { error } = await supabaseAdmin.from(\"admin_sessions\").insert({\n        id: sessionId,\n        user_id: userId,\n        expires_at: expiresAt,\n        ip_address: ipAddress,\n        user_agent: userAgent\n    });\n    if (error) {\n        throw new Error(\"Failed to create session\");\n    }\n    return sessionId;\n}\n/**\n * Validate session\n */ async function validateSession(sessionId) {\n    try {\n        const { data: session, error } = await supabaseAdmin.from(\"admin_sessions\").select(`\n        *,\n        admin_users (\n          id, username, email, full_name, role, is_active, last_login, created_at\n        )\n      `).eq(\"id\", sessionId).gt(\"expires_at\", new Date().toISOString()).single();\n        if (error || !session || !session.admin_users) {\n            return null;\n        }\n        return session.admin_users;\n    } catch (error) {\n        console.error(\"Session validation error:\", error);\n        return null;\n    }\n}\n/**\n * Destroy session (logout)\n */ async function destroySession(sessionId) {\n    await supabaseAdmin.from(\"admin_sessions\").delete().eq(\"id\", sessionId);\n}\n/**\n * Clean up expired sessions\n */ async function cleanupExpiredSessions() {\n    await supabaseAdmin.from(\"admin_sessions\").delete().lt(\"expires_at\", new Date().toISOString());\n}\n/**\n * Log admin activity\n */ async function logActivity(userId, action, resource, resourceId, details, ipAddress, userAgent) {\n    try {\n        await supabaseAdmin.from(\"admin_activity_logs\").insert({\n            user_id: userId,\n            action,\n            resource,\n            resource_id: resourceId,\n            details,\n            ip_address: ipAddress,\n            user_agent: userAgent\n        });\n    } catch (error) {\n        console.error(\"Failed to log activity:\", error);\n    }\n}\n/**\n * Generate secure session ID\n */ function generateSessionId() {\n    return `sess_${Date.now()}_${Math.random().toString(36).substring(2, 15)}`;\n}\n/**\n * Get user by ID\n */ async function getUserById(userId) {\n    try {\n        const { data: user, error } = await supabaseAdmin.from(\"admin_users\").select(\"id, username, email, full_name, role, is_active, last_login, created_at\").eq(\"id\", userId).eq(\"is_active\", true).single();\n        if (error || !user) {\n            return null;\n        }\n        return user;\n    } catch (error) {\n        console.error(\"Get user error:\", error);\n        return null;\n    }\n}\n/**\n * Check if user has permission\n */ function hasPermission(user, permission) {\n    // Superadmin has all permissions\n    if (user.role === \"superadmin\") {\n        return true;\n    }\n    // Add more role-based permissions here if needed\n    return false;\n}\n/**\n * Initialize authentication system\n */ async function initializeAuth() {\n    try {\n        console.log(\"\\uD83D\\uDD10 Initializing authentication system...\");\n        // Create default admin users\n        await createDefaultAdminUsers();\n        // Clean up expired sessions\n        await cleanupExpiredSessions();\n        console.log(\"✅ Authentication system initialized\");\n    } catch (error) {\n        console.error(\"❌ Failed to initialize authentication:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cmNlcyI6WyJ3ZWJwYWNrOi8vaGFmaXBvcnRyYWl0LW5leHRqcy8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXV0aGVudGljYXRpb24gVXRpbGl0aWVzXG4gKiBIYWZpUG9ydHJhaXQgQWRtaW4gQXV0aGVudGljYXRpb24gU3lzdGVtXG4gKi9cblxuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHRqcyc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50IHdpdGggc2VydmljZSByb2xlIGtleSBmb3IgYWRtaW4gb3BlcmF0aW9uc1xuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhO1xuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSE7XG5cbmNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSwge1xuICBhdXRoOiB7XG4gICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXG4gICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXG4gIH1cbn0pO1xuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAnaGFmaXBvcnRyYWl0LXNlY3JldC1rZXktY2hhbmdlLWluLXByb2R1Y3Rpb24nO1xuY29uc3QgU0VTU0lPTl9EVVJBVElPTiA9IDI0ICogNjAgKiA2MCAqIDEwMDA7IC8vIDI0IGhvdXJzXG5cbmV4cG9ydCBpbnRlcmZhY2UgQWRtaW5Vc2VyIHtcbiAgaWQ6IG51bWJlcjtcbiAgdXNlcm5hbWU6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgZnVsbF9uYW1lOiBzdHJpbmc7XG4gIHJvbGU6IHN0cmluZztcbiAgaXNfYWN0aXZlOiBib29sZWFuO1xuICBsYXN0X2xvZ2luOiBzdHJpbmcgfCBudWxsO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9naW5DcmVkZW50aWFscyB7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFNlc3Npb24ge1xuICBpZDogc3RyaW5nO1xuICB1c2VyX2lkOiBudW1iZXI7XG4gIGV4cGlyZXNfYXQ6IHN0cmluZztcbiAgaXBfYWRkcmVzcz86IHN0cmluZztcbiAgdXNlcl9hZ2VudD86IHN0cmluZztcbn1cblxuLyoqXG4gKiBIYXNoIHBhc3N3b3JkIHVzaW5nIGJjcnlwdFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzaFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBzYWx0Um91bmRzID0gMTI7XG4gIHJldHVybiBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdFJvdW5kcyk7XG59XG5cbi8qKlxuICogVmVyaWZ5IHBhc3N3b3JkIGFnYWluc3QgaGFzaFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZywgaGFzaDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIHJldHVybiBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgaGFzaCk7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgSldUIHRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHVzZXJJZDogbnVtYmVyLCB1c2VybmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGp3dC5zaWduKFxuICAgIHsgdXNlcklkLCB1c2VybmFtZSB9LFxuICAgIEpXVF9TRUNSRVQsXG4gICAgeyBleHBpcmVzSW46ICcyNGgnIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBWZXJpZnkgSldUIHRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKTogeyB1c2VySWQ6IG51bWJlcjsgdXNlcm5hbWU6IHN0cmluZyB9IHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpIGFzIGFueTtcbiAgICByZXR1cm4geyB1c2VySWQ6IGRlY29kZWQudXNlcklkLCB1c2VybmFtZTogZGVjb2RlZC51c2VybmFtZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIGFkbWluIHVzZXJzIHdpdGggaGFzaGVkIHBhc3N3b3Jkc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRGVmYXVsdEFkbWluVXNlcnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGRlZmF1bHRVc2VycyA9IFtcbiAgICB7XG4gICAgICB1c2VybmFtZTogJ2hhZmknLFxuICAgICAgcGFzc3dvcmQ6ICdIYW50dUAxMTIyMzMnLFxuICAgICAgZW1haWw6ICdoYWZpQGhhZmlwb3J0cmFpdC5jb20nLFxuICAgICAgZnVsbF9uYW1lOiAnSGFmaSBQb3J0cmFpdCdcbiAgICB9LFxuICAgIHtcbiAgICAgIHVzZXJuYW1lOiAnbmFuZGlrYScsXG4gICAgICBwYXNzd29yZDogJ0hhbnR1QDExMjIzMycsXG4gICAgICBlbWFpbDogJ25hbmRpa2FAaGFmaXBvcnRyYWl0LmNvbScsXG4gICAgICBmdWxsX25hbWU6ICdOYW5kaWthJ1xuICAgIH1cbiAgXTtcblxuICBmb3IgKGNvbnN0IHVzZXIgb2YgZGVmYXVsdFVzZXJzKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBleGlzdHNcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdVc2VyIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgIC5mcm9tKCdhZG1pbl91c2VycycpXG4gICAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgICAgLmVxKCd1c2VybmFtZScsIHVzZXIudXNlcm5hbWUpXG4gICAgICAgIC5zaW5nbGUoKTtcblxuICAgICAgaWYgKCFleGlzdGluZ1VzZXIpIHtcbiAgICAgICAgY29uc3QgaGFzaGVkUGFzc3dvcmQgPSBhd2FpdCBoYXNoUGFzc3dvcmQodXNlci5wYXNzd29yZCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAgICAgLmZyb20oJ2FkbWluX3VzZXJzJylcbiAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmRfaGFzaDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIGZ1bGxfbmFtZTogdXNlci5mdWxsX25hbWUsXG4gICAgICAgICAgICByb2xlOiAnc3VwZXJhZG1pbidcbiAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyB1c2VyICR7dXNlci51c2VybmFtZX06YCwgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgQ3JlYXRlZCBzdXBlcmFkbWluIHVzZXI6ICR7dXNlci51c2VybmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKEue+4jyBVc2VyICR7dXNlci51c2VybmFtZX0gYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyB1c2VyICR7dXNlci51c2VybmFtZX06YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEF1dGhlbnRpY2F0ZSB1c2VyIHdpdGggdXNlcm5hbWUgYW5kIHBhc3N3b3JkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyKGNyZWRlbnRpYWxzOiBMb2dpbkNyZWRlbnRpYWxzKTogUHJvbWlzZTxBZG1pblVzZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiB1c2VyLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pblxuICAgICAgLmZyb20oJ2FkbWluX3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCd1c2VybmFtZScsIGNyZWRlbnRpYWxzLnVzZXJuYW1lKVxuICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBpc1ZhbGlkUGFzc3dvcmQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChjcmVkZW50aWFscy5wYXNzd29yZCwgdXNlci5wYXNzd29yZF9oYXNoKTtcbiAgICBpZiAoIWlzVmFsaWRQYXNzd29yZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIGxhc3QgbG9naW5cbiAgICBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYWRtaW5fdXNlcnMnKVxuICAgICAgLnVwZGF0ZSh7IGxhc3RfbG9naW46IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KVxuICAgICAgLmVxKCdpZCcsIHVzZXIuaWQpO1xuXG4gICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBwYXNzd29yZCBoYXNoXG4gICAgY29uc3QgeyBwYXNzd29yZF9oYXNoLCAuLi51c2VyV2l0aG91dFBhc3N3b3JkIH0gPSB1c2VyO1xuICAgIHJldHVybiB1c2VyV2l0aG91dFBhc3N3b3JkO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGhlbnRpY2F0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBzZXNzaW9uIGZvciBhdXRoZW50aWNhdGVkIHVzZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24oXG4gIHVzZXJJZDogbnVtYmVyLCBcbiAgaXBBZGRyZXNzPzogc3RyaW5nLCBcbiAgdXNlckFnZW50Pzogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCBzZXNzaW9uSWQgPSBnZW5lcmF0ZVNlc3Npb25JZCgpO1xuICBjb25zdCBleHBpcmVzQXQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgU0VTU0lPTl9EVVJBVElPTikudG9JU09TdHJpbmcoKTtcblxuICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgLmZyb20oJ2FkbWluX3Nlc3Npb25zJylcbiAgICAuaW5zZXJ0KHtcbiAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBleHBpcmVzX2F0OiBleHBpcmVzQXQsXG4gICAgICBpcF9hZGRyZXNzOiBpcEFkZHJlc3MsXG4gICAgICB1c2VyX2FnZW50OiB1c2VyQWdlbnRcbiAgICB9KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvbicpO1xuICB9XG5cbiAgcmV0dXJuIHNlc3Npb25JZDtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBzZXNzaW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVNlc3Npb24oc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPEFkbWluVXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHNlc3Npb24sIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYWRtaW5fc2Vzc2lvbnMnKVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIGFkbWluX3VzZXJzIChcbiAgICAgICAgICBpZCwgdXNlcm5hbWUsIGVtYWlsLCBmdWxsX25hbWUsIHJvbGUsIGlzX2FjdGl2ZSwgbGFzdF9sb2dpbiwgY3JlYXRlZF9hdFxuICAgICAgICApXG4gICAgICBgKVxuICAgICAgLmVxKCdpZCcsIHNlc3Npb25JZClcbiAgICAgIC5ndCgnZXhwaXJlc19hdCcsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSlcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvciB8fCAhc2Vzc2lvbiB8fCAhc2Vzc2lvbi5hZG1pbl91c2Vycykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlc3Npb24uYWRtaW5fdXNlcnMgYXMgQWRtaW5Vc2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Nlc3Npb24gdmFsaWRhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBEZXN0cm95IHNlc3Npb24gKGxvZ291dClcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlc3Ryb3lTZXNzaW9uKHNlc3Npb25JZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAuZnJvbSgnYWRtaW5fc2Vzc2lvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpO1xufVxuXG4vKipcbiAqIENsZWFuIHVwIGV4cGlyZWQgc2Vzc2lvbnNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsZWFudXBFeHBpcmVkU2Vzc2lvbnMoKTogUHJvbWlzZTx2b2lkPiB7XG4gIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAuZnJvbSgnYWRtaW5fc2Vzc2lvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5sdCgnZXhwaXJlc19hdCcsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogTG9nIGFkbWluIGFjdGl2aXR5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dBY3Rpdml0eShcbiAgdXNlcklkOiBudW1iZXIsXG4gIGFjdGlvbjogc3RyaW5nLFxuICByZXNvdXJjZT86IHN0cmluZyxcbiAgcmVzb3VyY2VJZD86IHN0cmluZyxcbiAgZGV0YWlscz86IGFueSxcbiAgaXBBZGRyZXNzPzogc3RyaW5nLFxuICB1c2VyQWdlbnQ/OiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGF3YWl0IHN1cGFiYXNlQWRtaW5cbiAgICAgIC5mcm9tKCdhZG1pbl9hY3Rpdml0eV9sb2dzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgcmVzb3VyY2UsXG4gICAgICAgIHJlc291cmNlX2lkOiByZXNvdXJjZUlkLFxuICAgICAgICBkZXRhaWxzLFxuICAgICAgICBpcF9hZGRyZXNzOiBpcEFkZHJlc3MsXG4gICAgICAgIHVzZXJfYWdlbnQ6IHVzZXJBZ2VudFxuICAgICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvZyBhY3Rpdml0eTonLCBlcnJvcik7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBzZWN1cmUgc2Vzc2lvbiBJRFxuICovXG5mdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25JZCgpOiBzdHJpbmcge1xuICByZXR1cm4gYHNlc3NfJHtEYXRlLm5vdygpfV8ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCAxNSl9YDtcbn1cblxuLyoqXG4gKiBHZXQgdXNlciBieSBJRFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5SWQodXNlcklkOiBudW1iZXIpOiBQcm9taXNlPEFkbWluVXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHVzZXIsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXG4gICAgICAuZnJvbSgnYWRtaW5fdXNlcnMnKVxuICAgICAgLnNlbGVjdCgnaWQsIHVzZXJuYW1lLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlLCBpc19hY3RpdmUsIGxhc3RfbG9naW4sIGNyZWF0ZWRfYXQnKVxuICAgICAgLmVxKCdpZCcsIHVzZXJJZClcbiAgICAgIC5lcSgnaXNfYWN0aXZlJywgdHJ1ZSlcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR2V0IHVzZXIgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdXNlciBoYXMgcGVybWlzc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzUGVybWlzc2lvbih1c2VyOiBBZG1pblVzZXIsIHBlcm1pc3Npb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBTdXBlcmFkbWluIGhhcyBhbGwgcGVybWlzc2lvbnNcbiAgaWYgKHVzZXIucm9sZSA9PT0gJ3N1cGVyYWRtaW4nKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBBZGQgbW9yZSByb2xlLWJhc2VkIHBlcm1pc3Npb25zIGhlcmUgaWYgbmVlZGVkXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBJbml0aWFsaXplIGF1dGhlbnRpY2F0aW9uIHN5c3RlbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUF1dGgoKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ/CflJAgSW5pdGlhbGl6aW5nIGF1dGhlbnRpY2F0aW9uIHN5c3RlbS4uLicpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBkZWZhdWx0IGFkbWluIHVzZXJzXG4gICAgYXdhaXQgY3JlYXRlRGVmYXVsdEFkbWluVXNlcnMoKTtcbiAgICBcbiAgICAvLyBDbGVhbiB1cCBleHBpcmVkIHNlc3Npb25zXG4gICAgYXdhaXQgY2xlYW51cEV4cGlyZWRTZXNzaW9ucygpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgQXV0aGVudGljYXRpb24gc3lzdGVtIGluaXRpYWxpemVkJyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBpbml0aWFsaXplIGF1dGhlbnRpY2F0aW9uOicsIGVycm9yKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJiY3J5cHQiLCJqd3QiLCJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwic3VwYWJhc2VBZG1pbiIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJKV1RfU0VDUkVUIiwiU0VTU0lPTl9EVVJBVElPTiIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwic2FsdFJvdW5kcyIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImNvbXBhcmUiLCJnZW5lcmF0ZVRva2VuIiwidXNlcklkIiwidXNlcm5hbWUiLCJzaWduIiwiZXhwaXJlc0luIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJlcnJvciIsImNyZWF0ZURlZmF1bHRBZG1pblVzZXJzIiwiZGVmYXVsdFVzZXJzIiwiZW1haWwiLCJmdWxsX25hbWUiLCJ1c2VyIiwiZGF0YSIsImV4aXN0aW5nVXNlciIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsImhhc2hlZFBhc3N3b3JkIiwiaW5zZXJ0IiwicGFzc3dvcmRfaGFzaCIsInJvbGUiLCJjb25zb2xlIiwibG9nIiwiYXV0aGVudGljYXRlVXNlciIsImNyZWRlbnRpYWxzIiwiaXNWYWxpZFBhc3N3b3JkIiwidXBkYXRlIiwibGFzdF9sb2dpbiIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImlkIiwidXNlcldpdGhvdXRQYXNzd29yZCIsImNyZWF0ZVNlc3Npb24iLCJpcEFkZHJlc3MiLCJ1c2VyQWdlbnQiLCJzZXNzaW9uSWQiLCJnZW5lcmF0ZVNlc3Npb25JZCIsImV4cGlyZXNBdCIsIm5vdyIsInVzZXJfaWQiLCJleHBpcmVzX2F0IiwiaXBfYWRkcmVzcyIsInVzZXJfYWdlbnQiLCJFcnJvciIsInZhbGlkYXRlU2Vzc2lvbiIsInNlc3Npb24iLCJndCIsImFkbWluX3VzZXJzIiwiZGVzdHJveVNlc3Npb24iLCJkZWxldGUiLCJjbGVhbnVwRXhwaXJlZFNlc3Npb25zIiwibHQiLCJsb2dBY3Rpdml0eSIsImFjdGlvbiIsInJlc291cmNlIiwicmVzb3VyY2VJZCIsImRldGFpbHMiLCJyZXNvdXJjZV9pZCIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImdldFVzZXJCeUlkIiwiaGFzUGVybWlzc2lvbiIsInBlcm1pc3Npb24iLCJpbml0aWFsaXplQXV0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/semver","vendor-chunks/whatwg-url","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/jwa","vendor-chunks/lodash.once","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/webidl-conversions","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/isows"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Flogin%2Froute&page=%2Fapi%2Fauth%2Flogin%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Flogin%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();