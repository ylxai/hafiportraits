(()=>{var e={};e.id=3,e.ids=[3],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6436:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>o});var t=s(482),i=s(9108),l=s(2563),n=s.n(l),r=s(8300),d={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>r[e]);s.d(a,d);let o=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5557)),"C:\\Users\\Administrator\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3625)),"C:\\Users\\Administrator\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Administrator\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\src\\app\\admin\\page.tsx"],m="/admin/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},286:(e,a,s)=>{Promise.resolve().then(s.bind(s,5771))},5794:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(9224).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},5771:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>ec});var t=s(5344),i=s(6274),l=s(5037),n=s(1296),r=s(3729),d=s(3673),o=s(1467),c=s(5094),m=s(6540),x=s(2409),h=r.forwardRef((e,a)=>(0,t.jsx)(x.WV.label,{...e,ref:a,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));h.displayName="Label";var u=s(9247),p=s(1453);let g=(0,u.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=r.forwardRef(({className:e,...a},s)=>t.jsx(h,{ref:s,className:(0,p.cn)(g(),e),...a}));j.displayName=h.displayName;var v=s(5794),f=s(1765),y=s(9224);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let N=(0,y.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),b=(0,y.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),w=(0,y.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),k=(0,y.Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),P=(0,y.Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var S=s(3380),F=s(4507);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Z=(0,y.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),E=(0,y.Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var M=s(9464),C=s(6185),D=s(339),q=s(8852);function B({stats:e}){return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(d.ll,{className:"text-sm font-medium",children:"Total Event"}),t.jsx(v.Z,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(d.aY,{children:t.jsx("div",{className:"text-2xl font-bold",children:e?.totalEvents||0})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(d.ll,{className:"text-sm font-medium",children:"Total Foto"}),t.jsx(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(d.aY,{children:t.jsx("div",{className:"text-2xl font-bold",children:e?.totalPhotos||0})})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(d.ll,{className:"text-sm font-medium",children:"Total Pesan"}),t.jsx(q.Z,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(d.aY,{children:t.jsx("div",{className:"text-2xl font-bold",children:e?.totalMessages||0})})]})]})}function _({editingEvent:e,onSave:a,onCancel:s,isSaving:i}){let{toast:l}=(0,D.pm)(),[n,o]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{e?(o(e.name),h(new Date(e.date).toISOString().split("T")[0]),p(e.access_code),v(e.is_premium)):(o(""),h(""),p(""),v(!1))},[e]),(0,t.jsxs)(d.Zb,{className:"mb-6 border-wedding-gold/20",children:[t.jsx(d.Ol,{children:t.jsx(d.ll,{className:"text-lg",children:e?"Edit Event":"Buat Event Baru"})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(j,{htmlFor:"eventName",children:"Nama Event"}),t.jsx(m.I,{id:"eventName",value:n,onChange:e=>o(e.target.value),placeholder:"Masukkan nama event"})]}),(0,t.jsxs)("div",{children:[t.jsx(j,{htmlFor:"eventDate",children:"Tanggal Event"}),t.jsx(m.I,{id:"eventDate",type:"date",value:x,onChange:e=>h(e.target.value)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[(0,t.jsxs)("div",{children:[t.jsx(j,{htmlFor:"accessCode",children:"Kode Akses"}),t.jsx(m.I,{id:"accessCode",value:u,onChange:e=>p(e.target.value),placeholder:"Masukkan kode akses"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 pb-2",children:[t.jsx("input",{type:"checkbox",id:"isPremium",checked:g,onChange:e=>v(e.target.checked),className:"h-4 w-4 rounded"}),t.jsx(j,{htmlFor:"isPremium",children:"Event Premium"})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(c.z,{onClick:()=>{if(!n||!x||!u){l({title:"Data Tidak Lengkap",description:"Mohon isi semua field yang diperlukan.",variant:"destructive"});return}a({id:e?.id,name:n,date:x,access_code:u,is_premium:g})},disabled:i,className:"bg-wedding-gold hover:bg-wedding-gold/90 text-white",children:i?t.jsx(C.Z,{}):e?"Update Event":"Buat Event"}),t.jsx(c.z,{variant:"outline",onClick:s,children:"Batal"})]})]})]})}var O=s(9591),T=s(9151),z=s(3686);/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let U=(0,y.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),A=(0,y.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);function Y({events:e,onEdit:a,onDelete:s}){let{toast:i}=(0,D.pm)(),l=(e,a)=>{navigator.clipboard.writeText(e),i({title:"Berhasil Disalin!",description:`${a} telah disalin ke clipboard.`})};return 0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(v.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Belum ada event yang dibuat. Buat event pertama Anda!"})]}):t.jsx("div",{className:"space-y-4",children:e.map(e=>t.jsx(d.Zb,{className:"border-wedding-gold/20",children:t.jsx(d.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[t.jsx("h3",{className:"text-lg font-semibold",children:e.name}),e.is_premium&&t.jsx(O.C,{className:"bg-wedding-gold text-white",children:"Premium"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-2",children:["Tanggal: ",new Date(e.date).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mb-3",children:["Kode Akses: ",t.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:e.access_code})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>l(e.shareable_link,"Link Share"),children:[t.jsx(T.Z,{className:"w-3 h-3 mr-1"})," Copy Link"]}),(0,t.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>window.open(e.qr_code,"_blank"),children:[t.jsx(z.Z,{className:"w-3 h-3 mr-1"})," QR Code"]}),(0,t.jsxs)(c.z,{size:"sm",variant:"outline",onClick:()=>window.open(`/event/${e.id}`,"_blank"),children:[t.jsx(U,{className:"w-3 h-3 mr-1"})," Lihat Event"]})]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[t.jsx(c.z,{size:"sm",variant:"outline",onClick:()=>a(e),children:t.jsx(A,{className:"w-4 h-4"})}),t.jsx(c.z,{size:"sm",variant:"destructive",onClick:()=>{confirm("Yakin ingin menghapus event ini? Semua foto dan pesan akan ikut terhapus.")&&s(e.id)},children:t.jsx(F.Z,{className:"w-4 h-4"})})]})]})})},e.id))})}var G=s(3291),K=s(8462),L="Progress",[H,Q]=(0,K.b)(L),[$,I]=H(L),V=r.forwardRef((e,a)=>{var s,i;let{__scopeProgress:l,value:n=null,max:r,getValueLabel:d=X,...o}=e;(r||0===r)&&!ea(r)&&console.error((s=`${r}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let c=ea(r)?r:100;null===n||es(n,c)||console.error((i=`${n}`,`Invalid prop \`value\` of value \`${i}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let m=es(n,c)?n:null,h=ee(m)?d(m,c):void 0;return(0,t.jsx)($,{scope:l,value:m,max:c,children:(0,t.jsx)(x.WV.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":ee(m)?m:void 0,"aria-valuetext":h,role:"progressbar","data-state":J(m,c),"data-value":m??void 0,"data-max":c,...o,ref:a})})});V.displayName=L;var R="ProgressIndicator",W=r.forwardRef((e,a)=>{let{__scopeProgress:s,...i}=e,l=I(R,s);return(0,t.jsx)(x.WV.div,{"data-state":J(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...i,ref:a})});function X(e,a){return`${Math.round(e/a*100)}%`}function J(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function ee(e){return"number"==typeof e}function ea(e){return ee(e)&&!isNaN(e)&&e>0}function es(e,a){return ee(e)&&!isNaN(e)&&e<=a&&e>=0}W.displayName=R;let et=r.forwardRef(({className:e,value:a,...s},i)=>t.jsx(V,{ref:i,className:(0,p.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...s,children:t.jsx(W,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));et.displayName=V.displayName;/**
 * @license lucide-react v0.323.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ei=(0,y.Z)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),el=(0,y.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),en=(0,y.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),er=(0,y.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ed=(0,y.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);function eo(){let[e,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{l()},[]);let l=async()=>{try{i(!0);let e=await fetch("/api/admin/analytics/simple-compression"),s=await e.json();a(s)}catch(e){console.error("Error fetching compression stats:",e)}finally{i(!1)}},n=e=>{if(0===e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]};if(s)return t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)(d.Zb,{className:"animate-pulse",children:[t.jsx(d.Ol,{className:"pb-2",children:t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),(0,t.jsxs)(d.aY,{children:[t.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2 mb-2"}),t.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})]})]},a))})});if(!e)return t.jsx(d.Zb,{children:(0,t.jsxs)(d.aY,{className:"p-6 text-center",children:[t.jsx("p",{className:"text-gray-500",children:"Belum ada data kompresi tersedia"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Upload beberapa foto untuk melihat analytics"})]})});let o=e.totalSavingsBytes/1073741824*.023;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Analitik Kompresi Foto"}),t.jsx("p",{className:"text-muted-foreground",children:"Monitoring performa optimasi gambar"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(d.ll,{className:"text-sm font-medium",children:"Total Storage Hemat"}),t.jsx(ei,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(d.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.storageSaved}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.totalSavingsPercentage.toFixed(1),"% compression ratio"]}),t.jsx(et,{value:e.totalSavingsPercentage,className:"mt-2"})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(d.ll,{className:"text-sm font-medium",children:"Penghematan Bulanan"}),t.jsx(el,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",o.toFixed(2)]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Estimasi penghematan storage cost"}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[t.jsx(en,{className:"h-3 w-3 text-green-500 mr-1"}),t.jsx("span",{className:"text-xs text-green-600",children:"Cost optimized"})]})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(d.ll,{className:"text-sm font-medium",children:"Foto Dioptimasi"}),t.jsx(er,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(d.aY,{children:[t.jsx("div",{className:"text-2xl font-bold",children:e.totalPhotos.toLocaleString()}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Avg ratio: ",e.averageCompressionRatio.toFixed(1),":1"]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[t.jsx(ed,{className:"h-3 w-3 text-blue-500 mr-1"}),t.jsx("span",{className:"text-xs text-blue-600",children:"Performance boost"})]})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(d.ll,{className:"text-sm font-medium",children:"Loading Speed"}),t.jsx(ed,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[(e.totalSavingsPercentage/10).toFixed(1),"x"]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Faster image loading"}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[t.jsx(ed,{className:"h-3 w-3 text-purple-500 mr-1"}),t.jsx("span",{className:"text-xs text-purple-600",children:"User experience improved"})]})]})]})]}),(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{children:[t.jsx(d.ll,{children:"Foto Terbaru yang Dioptimasi"}),t.jsx(d.SZ,{children:"Hasil kompresi foto-foto terbaru"})]}),t.jsx(d.aY,{children:t.jsx("div",{className:"space-y-4",children:0===e.recentPhotos.length?t.jsx("p",{className:"text-center text-gray-500 py-8",children:"Belum ada foto yang dioptimasi. Upload foto untuk melihat hasil kompresi."}):e.recentPhotos.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(O.C,{variant:"secondary",children:["#",a+1]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.original_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[n(e.original_size)," â†’ ",n(e.optimized_size)]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)(O.C,{variant:"outline",className:"text-green-600 border-green-600",children:[e.savings_percentage.toFixed(1),"% hemat"]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(e.uploaded_at).toLocaleDateString("id-ID")})]})]},e.id))})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{className:"pb-2",children:t.jsx(d.ll,{className:"text-sm font-medium",children:"Mobile Data Hemat"})}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-green-600",children:[e.totalSavingsPercentage.toFixed(0),"%"]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Penggunaan data mobile berkurang"})]})]}),(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{className:"pb-2",children:t.jsx(d.ll,{className:"text-sm font-medium",children:"SEO Impact"})}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-purple-600",children:["+",Math.round(e.totalSavingsPercentage/5)]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"PageSpeed score improvement"})]})]}),(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{className:"pb-2",children:t.jsx(d.ll,{className:"text-sm font-medium",children:"User Experience"})}),(0,t.jsxs)(d.aY,{children:[(0,t.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[(2+e.totalSavingsPercentage/20).toFixed(1),"x"]}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Faster gallery browsing"})]})]})]})]})}function ec(){let{toast:e}=(0,D.pm)(),a=(0,i.NL)(),[s,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)(null),[p,g]=(0,r.useState)(""),[y,q]=(0,r.useState)(""),[O,T]=(0,r.useState)(""),[z,U]=(0,r.useState)(!1),[A,K]=(0,r.useState)(!1),[L,H]=(0,r.useState)(!1),[Q,$]=(0,r.useState)(!1),[I,V]=(0,r.useState)(null),[R,W]=(0,r.useState)(null),[X,J]=(0,r.useState)("homepage"),[ee,ea]=(0,r.useState)(""),[es,et]=(0,r.useState)(!1),[ei,el]=(0,r.useState)(""),[en,er]=(0,r.useState)(!1),[ed,ec]=(0,r.useState)(null),{data:em,isLoading:ex}=(0,l.a)({queryKey:["/api/admin/stats"],queryFn:async()=>(await (0,M.N)("GET","/api/admin/stats")).json()}),{data:eh=[],isLoading:eu}=(0,l.a)({queryKey:["/api/admin/events"],queryFn:async()=>(await (0,M.N)("GET","/api/admin/events")).json()}),{data:ep=[],isLoading:eg}=(0,l.a)({queryKey:["/api/admin/photos/homepage"],queryFn:async()=>(await (0,M.N)("GET","/api/admin/photos/homepage")).json()}),{data:ej=[],isLoading:ev}=(0,l.a)({queryKey:["/api/admin/photos/event",ee],queryFn:async()=>ee?(await (0,M.N)("GET",`/api/events/${ee}/photos`)).json():[],enabled:!!ee}),ef=(0,n.D)({mutationFn:async e=>{let a=await (0,M.N)("POST","/api/events",e);if(!a.ok)throw Error((await a.json().catch(()=>({}))).message||"Failed to create event");return a.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),eP(),x(!1),e({title:"Event Berhasil Dibuat!",description:"Event baru telah ditambahkan ke sistem."})},onError:()=>{e({title:"Gagal Membuat Event",description:"Terjadi kesalahan saat membuat event.",variant:"destructive"})}}),ey=(0,n.D)({mutationFn:async e=>(await (0,M.N)("PUT",`/api/events/${e.id}`,e)).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),eP(),u(null),e({title:"Event Berhasil Diperbarui!",description:"Event telah diperbarui dengan sukses."})},onError:()=>{e({title:"Gagal Memperbarui Event",description:"Terjadi kesalahan saat memperbarui event.",variant:"destructive"})}}),eN=(0,n.D)({mutationFn:async e=>(await (0,M.N)("DELETE",`/api/events/${e}`)).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/events"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),e({title:"Event Berhasil Dihapus!",description:"Event telah dihapus dari sistem."})},onError:()=>{e({title:"Gagal Menghapus Event",description:"Terjadi kesalahan saat menghapus event.",variant:"destructive"})}}),eb=(0,n.D)({mutationFn:async e=>{let a=new FormData;return a.append("file",e),(await (0,M.N)("POST","/api/admin/photos/homepage",a)).json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/photos/homepage"]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),e({title:"Foto Berhasil Diupload!",description:"Foto telah ditambahkan ke galeri homepage."})},onError:()=>{e({title:"Gagal Upload Foto",description:"Terjadi kesalahan saat mengupload foto.",variant:"destructive"})}}),ew=(0,n.D)({mutationFn:async e=>{let a=new FormData;return a.append("file",e),a.append("uploaderName","Admin"),a.append("albumName","Official"),(await (0,M.N)("POST",`/api/events/${ee}/photos`,a)).json()},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/photos/event",ee]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),et(!1),el(""),e({title:"Foto Official Berhasil Diupload!",description:"Foto telah ditambahkan ke galeri official event."})},onError:()=>{e({title:"Gagal Upload Foto Official",description:"Terjadi kesalahan saat mengupload foto official.",variant:"destructive"})}}),ek=(0,n.D)({mutationFn:async e=>{try{let a=await (0,M.N)("DELETE",`/api/admin/photos/${e}`);if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to delete photo")}return a.json()}catch(e){throw e}},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/photos/homepage"]}),a.invalidateQueries({queryKey:["/api/admin/photos/event",ee]}),a.invalidateQueries({queryKey:["/api/admin/stats"]}),e({title:"Foto Berhasil Dihapus!",description:"Foto telah dihapus dari sistem."})},onError:()=>{e({title:"Gagal Menghapus Foto",description:"Terjadi kesalahan saat menghapus foto.",variant:"destructive"})}}),eP=()=>{g(""),q(""),T(""),U(!1)};return ex||eu?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx(C.Z,{})}):t.jsx("div",{className:"min-h-screen bg-wedding-ivory",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,t.jsxs)("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-wedding-gold mb-2",children:"Dashboard Admin"}),t.jsx("p",{className:"text-muted-foreground",children:"Kelola event dan monitoring aktivitas platform"})]}),t.jsx(B,{stats:em}),(0,t.jsxs)(o.mQ,{defaultValue:"events",className:"space-y-6",children:[(0,t.jsxs)(o.dr,{className:"grid w-full grid-cols-2 sm:grid-cols-4 mobile-tabs",children:[(0,t.jsxs)(o.SP,{value:"events",className:"flex items-center gap-1 sm:gap-2 mobile-tab",children:[t.jsx(v.Z,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden xs:inline",children:"Event"})]}),(0,t.jsxs)(o.SP,{value:"photos",className:"flex items-center gap-1 sm:gap-2 mobile-tab",children:[t.jsx(f.Z,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden xs:inline",children:"Foto"})]}),(0,t.jsxs)(o.SP,{value:"analytics",className:"flex items-center gap-1 sm:gap-2 mobile-tab",children:[t.jsx(N,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden xs:inline",children:"Analitik"})]}),(0,t.jsxs)(o.SP,{value:"settings",className:"flex items-center gap-1 sm:gap-2 mobile-tab",children:[t.jsx(b,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden xs:inline",children:"Pengaturan"})]})]}),t.jsx(o.nU,{value:"events",className:"space-y-6",children:(0,t.jsxs)(d.Zb,{children:[(0,t.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[t.jsx(d.ll,{children:"Manajemen Event"}),!A&&(0,t.jsxs)(c.z,{onClick:()=>{u(null),K(!0)},className:"bg-wedding-gold hover:bg-wedding-gold/90 text-white",children:[t.jsx(w,{className:"text-black w-4 h-4 mr-2"}),"Buat Event Baru"]})]}),(0,t.jsxs)(d.aY,{children:[A&&t.jsx(_,{editingEvent:h,onSave:e=>{h&&h.id?ey.mutate({...e,id:h.id}):ef.mutate(e)},onCancel:()=>{u(null),K(!1)},isSaving:ef.isPending||ey.isPending}),t.jsx(Y,{events:eh,onEdit:e=>{u(e),K(!0)},onDelete:e=>eN.mutate(e)})]})]})}),t.jsx(o.nU,{value:"photos",className:"space-y-6",children:(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:t.jsx(d.ll,{children:"Manajemen Foto"})}),t.jsx(d.aY,{children:(0,t.jsxs)(o.mQ,{value:X,onValueChange:J,className:"w-full",children:[(0,t.jsxs)(o.dr,{className:"grid w-full grid-cols-2 mobile-tabs",children:[(0,t.jsxs)(o.SP,{value:"homepage",className:"flex items-center gap-1 sm:gap-2 mobile-tab",children:[t.jsx(k,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Galeri "}),"Homepage"]}),(0,t.jsxs)(o.SP,{value:"events",className:"flex items-center gap-1 sm:gap-2 mobile-tab",children:[t.jsx(P,{className:"w-4 h-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Galeri "}),"Event"]})]}),(0,t.jsxs)(o.nU,{value:"homepage",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Foto Galeri Homepage"}),(0,t.jsxs)(c.z,{onClick:()=>H(!0),className:"bg-wedding-gold hover:bg-wedding-gold/90 text-wedding-black",children:[t.jsx(S.Z,{className:"w-4 h-4 mr-2"}),"Upload Foto"]})]}),L&&(0,t.jsxs)(d.Zb,{className:"mb-6 border-wedding-gold/20",children:[t.jsx(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"text-lg flex items-center gap-2",children:[t.jsx(S.Z,{className:"w-5 h-5 text-wedding-gold"}),"Upload Foto Homepage"]})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(j,{htmlFor:"homepage-photo-input",children:"Pilih Foto"}),t.jsx(m.I,{id:"homepage-photo-input",type:"file",multiple:!0,accept:"image/*",onChange:a=>{Array.from(a.target.files||[]).forEach(a=>{if(a.size>10485760){e({title:"File Terlalu Besar",description:"Ukuran file maksimal 10MB.",variant:"destructive"});return}eb.mutate(a)})},className:"mt-1"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Ukuran maksimal 10MB."})]}),t.jsx("div",{className:"flex space-x-2",children:t.jsx(c.z,{onClick:()=>H(!1),variant:"outline",children:"Batal"})})]})]}),eb.isPending&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-4",children:[t.jsx(C.Z,{}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Mengupload foto..."})]}),eg?t.jsx("div",{className:"text-center py-8",children:t.jsx(C.Z,{})}):ep.length>0?t.jsx("div",{className:"photo-grid",children:ep.map((e,a)=>(0,t.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{V(a),$(!0)},children:[t.jsx("img",{src:e.url,alt:e.original_name,className:"w-full h-32 object-cover rounded-lg"}),t.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all rounded-lg flex items-center justify-center",children:t.jsx(c.z,{size:"sm",variant:"destructive",className:"mobile-delete-btn opacity-0 group-hover:opacity-100",onClick:a=>{a.stopPropagation(),confirm("Yakin ingin menghapus foto ini?")&&ek.mutate(e.id)},children:t.jsx(F.Z,{className:"w-3 h-3"})})})]},e.id))}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Belum ada foto di galeri homepage. Upload foto pertama Anda!"})]})]}),(0,t.jsxs)(o.nU,{value:"events",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Foto Galeri Event"}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2",children:[(0,t.jsxs)("select",{value:ee,onChange:e=>ea(e.target.value),className:"px-3 py-2 border rounded-md",children:[t.jsx("option",{value:"",children:"Pilih Event"}),eh.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]}),ee&&(0,t.jsxs)(c.z,{onClick:()=>et(!0),className:"bg-wedding-gold hover:bg-wedding-gold/90 text-wedding-black",children:[t.jsx(E,{className:"text-black w-4 h-4 mr-2"}),"Upload Foto Official"]})]})]}),es&&ee&&(0,t.jsxs)(d.Zb,{className:"mb-6 border-wedding-gold/20",children:[t.jsx(d.Ol,{children:(0,t.jsxs)(d.ll,{className:"text-lg flex items-center gap-2",children:[t.jsx(E,{className:"w-5 h-5 text-wedding-gold"}),"Upload Foto Official"]})}),(0,t.jsxs)(d.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[t.jsx(j,{htmlFor:"officialPhoto",children:"Pilih Foto"}),t.jsx(m.I,{id:"officialPhoto",type:"file",accept:"image/*",onChange:a=>{let s=Array.from(a.target.files||[]);if(s.length>0){let a=s[0];if(a.size>10485760){e({title:"File Terlalu Besar",description:"Ukuran file maksimal 10MB.",variant:"destructive"});return}ew.mutate(a)}},className:"mt-1"}),t.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Ukuran maksimal 10MB. Format: JPG, PNG, GIF"})]}),t.jsx("div",{className:"flex space-x-2",children:t.jsx(c.z,{onClick:()=>{et(!1),el("")},variant:"outline",children:"Batal"})})]})]}),ew.isPending&&(0,t.jsxs)("div",{className:"flex items-center justify-center py-4",children:[t.jsx(C.Z,{}),t.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Mengupload foto official..."})]}),ee?ev?t.jsx("div",{className:"text-center py-8",children:t.jsx(C.Z,{})}):ej.length>0?t.jsx("div",{children:["Official","Tamu","Bridesmaid"].map(e=>{let a=ej.filter(a=>a.album_name===e);return 0===a.length?null:(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("h4",{className:"text-md font-semibold mb-4 text-wedding-gold flex items-center gap-2",children:["Official"===e&&t.jsx(E,{className:"w-4 h-4"}),"Album ",e," (",a.length," foto)"]}),t.jsx("div",{className:"photo-grid",children:a.map((e,a)=>(0,t.jsxs)("div",{className:"relative group cursor-pointer",onClick:()=>{V(a),$(!0)},children:[t.jsx("img",{src:e.url,alt:e.original_name,className:"w-full h-32 object-cover rounded-lg"}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/50 transition-all rounded-lg flex items-center justify-center",children:[t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-1"}),t.jsx("div",{className:"absolute bottom-1 left-1 right-1 text-xs text-white bg-black/50 rounded px-1 py-0.5 truncate",children:e.uploader_name||"Anonim"})]})]},e.id))})]},e)})}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(f.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Belum ada foto di event ini."})]}):(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[t.jsx(P,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),t.jsx("p",{children:"Pilih event untuk melihat foto-fotonya."})]})]})]})})]})}),t.jsx(o.nU,{value:"analytics",className:"space-y-6",children:t.jsx(eo,{})}),t.jsx(o.nU,{value:"settings",children:(0,t.jsxs)(d.Zb,{children:[t.jsx(d.Ol,{children:t.jsx(d.ll,{children:"Pengaturan Platform"})}),t.jsx(d.aY,{children:t.jsx("p",{children:"Pengaturan aplikasi akan ditampilkan di sini"})})]})})]}),Q&&null!==I&&t.jsx(G.Z,{photos:"homepage"===X?ep:ej,currentIndex:I,onClose:()=>$(!1),onDelete:e=>{confirm("Yakin ingin menghapus foto ini secara permanen?")&&ek.mutate(e,{onSuccess:()=>{$(!1)}})},onLike:e=>{},onUnlike:e=>{}})]})})}},9591:(e,a,s)=>{"use strict";s.d(a,{C:()=>r});var t=s(5344);s(3729);var i=s(9247),l=s(1453);let n=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r({className:e,variant:a,...s}){return t.jsx("div",{className:(0,l.cn)(n({variant:a}),e),...s})}},5557:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>l,__esModule:()=>i,default:()=>n});let t=(0,s(6843).createProxy)(String.raw`C:\Users\Administrator\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\src\app\admin\page.tsx`),{__esModule:i,$$typeof:l}=t,n=t.default}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[638,623,32,452,521],()=>s(6436));module.exports=t})();