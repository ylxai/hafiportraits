/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/events/route";
exports.ids = ["app/api/admin/events/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("sharp");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fevents%2Froute&page=%2Fapi%2Fadmin%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fevents%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fevents%2Froute&page=%2Fapi%2Fadmin%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fevents%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Administrator_nana_cursor_admin_dashboard_gallery_feature_enhancement_a647_hafi_portrait_stable_src_app_api_admin_events_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/events/route.ts */ \"(rsc)/./src/app/api/admin/events/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/events/route\",\n        pathname: \"/api/admin/events\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/events/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Administrator\\\\nana-cursor-admin-dashboard-gallery-feature-enhancement-a647\\\\hafi-portrait-stable\\\\src\\\\app\\\\api\\\\admin\\\\events\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Administrator_nana_cursor_admin_dashboard_gallery_feature_enhancement_a647_hafi_portrait_stable_src_app_api_admin_events_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/admin/events/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRmV2ZW50cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZldmVudHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRmV2ZW50cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBZG1pbmlzdHJhdG9yJTVDbmFuYS1jdXJzb3ItYWRtaW4tZGFzaGJvYXJkLWdhbGxlcnktZmVhdHVyZS1lbmhhbmNlbWVudC1hNjQ3JTVDaGFmaS1wb3J0cmFpdC1zdGFibGUlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0FkbWluaXN0cmF0b3IlNUNuYW5hLWN1cnNvci1hZG1pbi1kYXNoYm9hcmQtZ2FsbGVyeS1mZWF0dXJlLWVuaGFuY2VtZW50LWE2NDclNUNoYWZpLXBvcnRyYWl0LXN0YWJsZSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNvRztBQUNqTDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhZmlwb3J0cmFpdC1uZXh0anMvPzM1NDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcQWRtaW5pc3RyYXRvclxcXFxuYW5hLWN1cnNvci1hZG1pbi1kYXNoYm9hcmQtZ2FsbGVyeS1mZWF0dXJlLWVuaGFuY2VtZW50LWE2NDdcXFxcaGFmaS1wb3J0cmFpdC1zdGFibGVcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcYWRtaW5cXFxcZXZlbnRzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9ldmVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi9ldmVudHNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FkbWluL2V2ZW50cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEFkbWluaXN0cmF0b3JcXFxcbmFuYS1jdXJzb3ItYWRtaW4tZGFzaGJvYXJkLWdhbGxlcnktZmVhdHVyZS1lbmhhbmNlbWVudC1hNjQ3XFxcXGhhZmktcG9ydHJhaXQtc3RhYmxlXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGFkbWluXFxcXGV2ZW50c1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hZG1pbi9ldmVudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fevents%2Froute&page=%2Fapi%2Fadmin%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fevents%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/admin/events/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/admin/events/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./src/lib/database.ts\");\n\n\nasync function GET() {\n    try {\n        const events = await _lib_database__WEBPACK_IMPORTED_MODULE_1__.database.getAllEvents();\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(events);\n    } catch (error) {\n        // Log error for debugging (consider using proper logging service in production)\n        if (true) {\n            console.error(\"Get admin events error:\", error);\n        }\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: \"Failed to load admin events\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const eventData = await request.json();\n        const newEvent = await _lib_database__WEBPACK_IMPORTED_MODULE_1__.database.createEvent(eventData);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(newEvent, {\n            status: 201\n        });\n    } catch (error) {\n        // Log error for debugging (consider using proper logging service in production)\n        if (true) {\n            console.error(\"Create event error:\", error);\n        }\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: `Failed to create event: ${errorMessage}`\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZG1pbi9ldmVudHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUNEO0FBRW5DLGVBQWVFO0lBQ3BCLElBQUk7UUFDRixNQUFNQyxTQUFTLE1BQU1GLG1EQUFRQSxDQUFDRyxZQUFZO1FBQzFDLE9BQU9KLGtGQUFZQSxDQUFDSyxJQUFJLENBQUNGO0lBQzNCLEVBQUUsT0FBT0csT0FBTztRQUNkLGdGQUFnRjtRQUNoRixJQUFJQyxJQUF5QixFQUFlO1lBQzFDQyxRQUFRRixLQUFLLENBQUMsMkJBQTJCQTtRQUMzQztRQUNBLE9BQU9OLGtGQUFZQSxDQUFDSyxJQUFJLENBQUM7WUFBRUksU0FBUztRQUE4QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNyRjtBQUNGO0FBRU8sZUFBZUMsS0FBS0MsT0FBZ0I7SUFDekMsSUFBSTtRQUNGLE1BQU1DLFlBQVksTUFBTUQsUUFBUVAsSUFBSTtRQUNwQyxNQUFNUyxXQUFXLE1BQU1iLG1EQUFRQSxDQUFDYyxXQUFXLENBQUNGO1FBQzVDLE9BQU9iLGtGQUFZQSxDQUFDSyxJQUFJLENBQUNTLFVBQVU7WUFBRUosUUFBUTtRQUFJO0lBQ25ELEVBQUUsT0FBT0osT0FBTztRQUNkLGdGQUFnRjtRQUNoRixJQUFJQyxJQUF5QixFQUFlO1lBQzFDQyxRQUFRRixLQUFLLENBQUMsdUJBQXVCQTtRQUN2QztRQUNBLE1BQU1VLGVBQWVWLGlCQUFpQlcsUUFBUVgsTUFBTUcsT0FBTyxHQUFHO1FBQzlELE9BQU9ULGtGQUFZQSxDQUFDSyxJQUFJLENBQUM7WUFBRUksU0FBUyxDQUFDLHdCQUF3QixFQUFFTyxhQUFhLENBQUM7UUFBQyxHQUFHO1lBQUVOLFFBQVE7UUFBSTtJQUNqRztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFmaXBvcnRyYWl0LW5leHRqcy8uL3NyYy9hcHAvYXBpL2FkbWluL2V2ZW50cy9yb3V0ZS50cz9hYTdjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgZGF0YWJhc2UgfSBmcm9tICdAL2xpYi9kYXRhYmFzZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCBkYXRhYmFzZS5nZXRBbGxFdmVudHMoKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihldmVudHMpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAvLyBMb2cgZXJyb3IgZm9yIGRlYnVnZ2luZyAoY29uc2lkZXIgdXNpbmcgcHJvcGVyIGxvZ2dpbmcgc2VydmljZSBpbiBwcm9kdWN0aW9uKVxyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dldCBhZG1pbiBldmVudHMgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0ZhaWxlZCB0byBsb2FkIGFkbWluIGV2ZW50cycgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZXZlbnREYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XHJcbiAgICBjb25zdCBuZXdFdmVudCA9IGF3YWl0IGRhdGFiYXNlLmNyZWF0ZUV2ZW50KGV2ZW50RGF0YSk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24obmV3RXZlbnQsIHsgc3RhdHVzOiAyMDEgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIC8vIExvZyBlcnJvciBmb3IgZGVidWdnaW5nIChjb25zaWRlciB1c2luZyBwcm9wZXIgbG9nZ2luZyBzZXJ2aWNlIGluIHByb2R1Y3Rpb24pXHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignQ3JlYXRlIGV2ZW50IGVycm9yOicsIGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogYEZhaWxlZCB0byBjcmVhdGUgZXZlbnQ6ICR7ZXJyb3JNZXNzYWdlfWAgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZGF0YWJhc2UiLCJHRVQiLCJldmVudHMiLCJnZXRBbGxFdmVudHMiLCJqc29uIiwiZXJyb3IiLCJwcm9jZXNzIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJQT1NUIiwicmVxdWVzdCIsImV2ZW50RGF0YSIsIm5ld0V2ZW50IiwiY3JlYXRlRXZlbnQiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/events/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database.ts":
/*!*****************************!*\
  !*** ./src/lib/database.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   database: () => (/* binding */ database)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(rsc)/./src/lib/supabase.ts\");\n/* harmony import */ var _image_optimizer_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./image-optimizer-server */ \"(rsc)/./src/lib/image-optimizer-server.ts\");\n // Pastikan ini diimpor dengan benar\n\nclass DatabaseService {\n    constructor(){\n        this.supabase = _supabase__WEBPACK_IMPORTED_MODULE_0__.supabaseAdmin;\n        this.imageOptimizer = new _image_optimizer_server__WEBPACK_IMPORTED_MODULE_1__.ImageOptimizerServer(this.supabase, \"photos\");\n    }\n    // --- Metode Event ---\n    async getAllEvents() {\n        const { data, error } = await this.supabase.from(\"events\").select(\"*\").order(\"date\", {\n            ascending: false\n        });\n        if (error) throw error;\n        return data;\n    }\n    async getPublicEvents() {\n        const { data, error } = await this.supabase.from(\"events\").select(\"id, name, date, is_premium, qr_code, shareable_link\").is(\"is_premium\", false) // Asumsi hanya event non-premium yang publik, sesuaikan jika perlu\n        .order(\"date\", {\n            ascending: false\n        });\n        if (error) throw error;\n        return data;\n    }\n    async getEventById(id) {\n        const { data, error } = await this.supabase.from(\"events\").select(\"*\").eq(\"id\", id).single();\n        if (error) throw error;\n        return data;\n    }\n    async createEvent(event) {\n        // First, insert the event to get the ID\n        const { data: newEvent, error } = await this.supabase.from(\"events\").insert(event).select().single();\n        if (error) throw error;\n        try {\n            // Generate QR code and shareable link\n            const baseUrl = process.env.NEXT_PUBLIC_APP_URL || \"http://localhost:3000\";\n            const eventUrl = `${baseUrl}/event/${newEvent.id}?code=${newEvent.access_code}`;\n            // Generate QR code using a service like QRServer.com\n            const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(eventUrl)}`;\n            // Update the event with QR code and shareable link\n            const { data: updatedEvent, error: updateError } = await this.supabase.from(\"events\").update({\n                qr_code: qrCodeUrl,\n                shareable_link: eventUrl\n            }).eq(\"id\", newEvent.id).select().single();\n            if (updateError) throw updateError;\n            return updatedEvent;\n        } catch (updateError) {\n            console.error(\"Error generating QR code:\", updateError);\n            // Return the event even if QR code generation fails\n            return newEvent;\n        }\n    }\n    async updateEvent(id, updates) {\n        const { data, error } = await this.supabase.from(\"events\").update(updates).eq(\"id\", id).select().single();\n        if (error) throw error;\n        return data;\n    }\n    async deleteEvent(id) {\n        const { error } = await this.supabase.from(\"events\").delete().eq(\"id\", id);\n        if (error) throw error;\n    }\n    async verifyEventAccessCode(eventId, code) {\n        const { data, error } = await this.supabase.from(\"events\").select(\"id\").eq(\"id\", eventId).eq(\"access_code\", code).single();\n        if (error) {\n            if (true) {\n                console.error(\"Error verifying access code:\", error);\n            }\n            return false;\n        }\n        return !!data;\n    }\n    // --- Metode Foto ---\n    async getEventPhotos(eventId) {\n        const { data, error } = await this.supabase.from(\"photos\").select(\"*\").eq(\"event_id\", eventId).order(\"uploaded_at\", {\n            ascending: false\n        });\n        if (error) throw error;\n        return data;\n    }\n    async getHomepagePhotos() {\n        const { data, error } = await this.supabase.from(\"photos\").select(\"*\").eq(\"is_homepage\", true) // Asumsi kolom ini ada di tabel photos\n        .order(\"uploaded_at\", {\n            ascending: false\n        });\n        if (error) {\n            // Log error yang lebih spesifik jika kolom tidak ditemukan\n            if (error.code === \"42P01\") {\n                if (true) {\n                    console.error(\"Database Error: Column 'is_homepage' does not exist. Please add it to your 'photos' table.\");\n                }\n            }\n            throw error;\n        }\n        return data;\n    }\n    validateFileExtension(filename) {\n        const allowedExtensions = [\n            \"jpg\",\n            \"jpeg\",\n            \"png\",\n            \"gif\",\n            \"webp\"\n        ];\n        const ext = filename.split(\".\").pop()?.toLowerCase();\n        return ext ? allowedExtensions.includes(ext) : false;\n    }\n    generateFileName(originalName) {\n        const fileExt = originalName.split(\".\").pop()?.toLowerCase() || \"jpg\";\n        const timestamp = Date.now();\n        const randomStr = Math.random().toString(36).substring(2, 8);\n        return `${timestamp}_${randomStr}.${fileExt}`;\n    }\n    async getEvents() {\n        const { data, error } = await this.supabase.from(\"events\").select(\"*\").order(\"date\", {\n            ascending: false\n        });\n        if (error) throw error;\n        return data || [];\n    }\n    async getSimpleCompressionAnalytics() {\n        try {\n            // Get photos with compression data (simplified version)\n            const { data: photos, error: photosError } = await this.supabase.from(\"photos\").select(\"*\").not(\"optimized_images\", \"is\", null).order(\"uploaded_at\", {\n                ascending: false\n            }).limit(100); // Limit to recent 100 photos\n            if (photosError) throw photosError;\n            // Calculate simple analytics\n            const totalPhotos = photos?.length || 0;\n            let totalOriginalSize = 0;\n            let totalOptimizedSize = 0;\n            let totalSavingsBytes = 0;\n            const recentPhotos = [];\n            photos?.forEach((photo)=>{\n                if (photo.image_metadata && photo.optimized_images) {\n                    const originalSize = photo.image_metadata.original_size || 0;\n                    const optimizedSize = photo.optimized_images.medium?.size || 0;\n                    const savings = originalSize - optimizedSize;\n                    const savingsPercentage = originalSize > 0 ? savings / originalSize * 100 : 0;\n                    totalOriginalSize += originalSize;\n                    totalOptimizedSize += optimizedSize;\n                    totalSavingsBytes += savings;\n                    // Recent photos (top 10)\n                    if (recentPhotos.length < 10) {\n                        recentPhotos.push({\n                            id: photo.id,\n                            original_name: photo.original_name,\n                            original_size: originalSize,\n                            optimized_size: optimizedSize,\n                            savings_percentage: savingsPercentage,\n                            uploaded_at: photo.uploaded_at\n                        });\n                    }\n                }\n            });\n            const totalSavingsPercentage = totalOriginalSize > 0 ? totalSavingsBytes / totalOriginalSize * 100 : 0;\n            const averageCompressionRatio = totalOptimizedSize > 0 ? totalOriginalSize / totalOptimizedSize : 1;\n            return {\n                totalPhotos,\n                totalOriginalSize,\n                totalOptimizedSize,\n                totalSavingsBytes,\n                totalSavingsPercentage,\n                storageSaved: this.formatFileSize(totalSavingsBytes),\n                averageCompressionRatio,\n                recentPhotos: recentPhotos.sort((a, b)=>b.savings_percentage - a.savings_percentage)\n            };\n        } catch (error) {\n            console.error(\"Error getting simple compression analytics:\", error);\n            throw error;\n        }\n    }\n    formatFileSize(bytes) {\n        if (bytes === 0) return \"0 Bytes\";\n        const k = 1024;\n        const sizes = [\n            \"Bytes\",\n            \"KB\",\n            \"MB\",\n            \"GB\"\n        ];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n    }\n    async validateEventAccess(eventId) {\n        const { data, error } = await this.supabase.from(\"events\").select(\"id, is_premium\").eq(\"id\", eventId).single();\n        if (error || !data) {\n            throw new Error(\"Event not found\");\n        }\n        return true;\n    }\n    async uploadEventPhoto(eventId, file, uploaderName = \"Anonymous\", albumName = \"Tamu\") {\n        // Validate eventId exists\n        await this.validateEventAccess(eventId);\n        // Validate file extension\n        if (!this.validateFileExtension(file.name)) {\n            throw new Error(\"Invalid file type. Allowed: jpg, jpeg, png, gif, webp\");\n        }\n        try {\n            // Convert File to Buffer for server-side processing\n            const arrayBuffer = await file.arrayBuffer();\n            const buffer = Buffer.from(arrayBuffer);\n            // Process image with optimization (server-side)\n            const optimizedImages = await this.imageOptimizer.processImage(buffer, file.name, `events/${eventId}`);\n            // Get image metadata\n            const sharp = (await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! sharp */ \"sharp\", 23))).default;\n            const metadata = await sharp(buffer).metadata();\n            const imageMetadata = {\n                width: metadata.width || 0,\n                height: metadata.height || 0,\n                format: metadata.format || \"jpeg\",\n                original_size: buffer.length\n            };\n            // Calculate compression stats\n            const compressionStats = _image_optimizer_server__WEBPACK_IMPORTED_MODULE_1__.ImageOptimizerServer.getCompressionStats(optimizedImages);\n            const { data: photoData, error: insertError } = await this.supabase.from(\"photos\").insert({\n                event_id: eventId,\n                url: optimizedImages.original.url,\n                thumbnail_url: optimizedImages.thumbnail.url,\n                original_name: file.name,\n                uploader_name: uploaderName,\n                album_name: albumName,\n                is_homepage: false,\n                filename: this.generateFileName(file.name),\n                optimized_images: optimizedImages,\n                image_metadata: imageMetadata,\n                compression_stats: compressionStats\n            }).select().single();\n            if (insertError) throw insertError;\n            return photoData;\n        } catch (error) {\n            console.error(\"Error uploading optimized event photo:\", error);\n            throw error;\n        }\n    }\n    async uploadHomepagePhoto(file) {\n        // Validate file extension\n        if (!this.validateFileExtension(file.name)) {\n            throw new Error(\"Invalid file type. Allowed: jpg, jpeg, png, gif, webp\");\n        }\n        try {\n            // Convert File to Buffer for server-side processing\n            const arrayBuffer = await file.arrayBuffer();\n            const buffer = Buffer.from(arrayBuffer);\n            // Process image with optimization (server-side)\n            const optimizedImages = await this.imageOptimizer.processImage(buffer, file.name, \"homepage\");\n            // Get image metadata\n            const sharp = (await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! sharp */ \"sharp\", 23))).default;\n            const metadata = await sharp(buffer).metadata();\n            const imageMetadata = {\n                width: metadata.width || 0,\n                height: metadata.height || 0,\n                format: metadata.format || \"jpeg\",\n                original_size: buffer.length\n            };\n            // Calculate compression stats\n            const compressionStats = _image_optimizer_server__WEBPACK_IMPORTED_MODULE_1__.ImageOptimizerServer.getCompressionStats(optimizedImages);\n            const { data: photoData, error: insertError } = await this.supabase.from(\"photos\").insert({\n                url: optimizedImages.original.url,\n                thumbnail_url: optimizedImages.thumbnail.url,\n                original_name: file.name,\n                is_homepage: true,\n                event_id: null,\n                uploader_name: \"Admin\",\n                album_name: \"Homepage\",\n                filename: this.generateFileName(file.name),\n                optimized_images: optimizedImages,\n                image_metadata: imageMetadata,\n                compression_stats: compressionStats\n            }).select().single();\n            if (insertError) throw insertError;\n            return photoData;\n        } catch (error) {\n            console.error(\"Error uploading optimized homepage photo:\", error);\n            throw error;\n        }\n    }\n    async getPhotoById(photoId) {\n        const { data, error } = await this.supabase.from(\"photos\").select(\"*\").eq(\"id\", photoId).single();\n        if (error) throw error;\n        return data;\n    }\n    async deletePhoto(photoId) {\n        // Get photo details\n        const photo = await this.getPhotoById(photoId);\n        if (!photo) {\n            throw new Error(\"Photo not found\");\n        }\n        try {\n            // Extract file path from URL or use stored filename\n            let filePath;\n            if (photo.filename) {\n                // Use stored filename if available\n                if (photo.is_homepage) {\n                    filePath = `homepage/${photo.filename}`;\n                } else if (photo.event_id) {\n                    filePath = `events/${photo.event_id}/${photo.filename}`;\n                } else {\n                    // Fallback if structure is unclear\n                    filePath = photo.filename;\n                }\n            } else {\n                // Extract from URL as fallback\n                const urlParts = photo.url.split(\"/\");\n                const fileName = urlParts[urlParts.length - 1];\n                if (photo.is_homepage) {\n                    filePath = `homepage/${fileName}`;\n                } else if (photo.event_id) {\n                    filePath = `events/${photo.event_id}/${fileName}`;\n                } else {\n                    // Fallback if structure is unclear\n                    filePath = fileName;\n                }\n            }\n            // Delete from storage first\n            const { error: deleteStorageError } = await this.supabase.storage.from(\"photos\").remove([\n                filePath\n            ]);\n            if (deleteStorageError) {\n                if (true) {\n                    console.error(\"Error deleting file from storage:\", deleteStorageError);\n                }\n            // Continue with database deletion even if storage deletion fails\n            }\n            // Then delete from database\n            const { error: deleteDbError } = await this.supabase.from(\"photos\").delete().eq(\"id\", photoId);\n            if (deleteDbError) throw deleteDbError;\n        } catch (error) {\n            // If it's not a storage error, rethrow\n            if (error instanceof Error && !error.message.includes(\"storage\")) {\n                throw error;\n            }\n            // For storage errors, try to delete from database anyway\n            const { error: deleteDbError } = await this.supabase.from(\"photos\").delete().eq(\"id\", photoId);\n            if (deleteDbError) throw deleteDbError;\n        }\n    }\n    async likePhoto(photoId) {\n        const { data, error } = await this.supabase.rpc(\"increment_likes\", {\n            photo_id: photoId\n        }); // Panggil fungsi RPC\n        if (error) throw error;\n    }\n    // --- Metode Pesan ---\n    async getEventMessages(eventId) {\n        const { data, error } = await this.supabase.from(\"messages\").select(\"*\").eq(\"event_id\", eventId).order(\"sent_at\", {\n            ascending: false\n        });\n        if (error) throw error;\n        return data;\n    }\n    async createMessage(message) {\n        const { data, error } = await this.supabase.from(\"messages\").insert(message).select().single();\n        if (error) throw error;\n        return data;\n    }\n    async heartMessage(messageId) {\n        const { data, error } = await this.supabase.rpc(\"increment_hearts\", {\n            message_id: messageId\n        }); // Panggil fungsi RPC\n        if (error) throw error;\n    }\n    // --- Metode Statistik ---\n    async getStats() {\n        const { count: totalEvents, error: eventsError } = await this.supabase.from(\"events\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (eventsError) throw eventsError;\n        const { count: totalPhotos, error: photosError } = await this.supabase.from(\"photos\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (photosError) throw photosError;\n        const { count: totalMessages, error: messagesError } = await this.supabase.from(\"messages\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (messagesError) throw messagesError;\n        return {\n            totalEvents: totalEvents || 0,\n            totalPhotos: totalPhotos || 0,\n            totalMessages: totalMessages || 0\n        };\n    }\n}\nconst database = new DatabaseService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RixlQUFlQSxpQkFBaUI7UUFDbEM7SUFDRjtBQUNGO0FBRU8sTUFBTUUsV0FBVyxJQUFJdEssa0JBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFmaXBvcnRyYWl0LW5leHRqcy8uL3NyYy9saWIvZGF0YWJhc2UudHM/YzFiMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnLi9zdXBhYmFzZSc7IC8vIFBhc3Rpa2FuIGluaSBkaWltcG9yIGRlbmdhbiBiZW5hclxyXG5pbXBvcnQgeyBJbWFnZU9wdGltaXplclNlcnZlciB9IGZyb20gJy4vaW1hZ2Utb3B0aW1pemVyLXNlcnZlcic7XHJcblxyXG4vLyBEZWZpbmlzaSBUaXBlIERhdGEgdW50dWsga29uc2lzdGVuc2lcclxuZXhwb3J0IHR5cGUgRXZlbnQgPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgZGF0ZTogc3RyaW5nO1xyXG4gIGFjY2Vzc19jb2RlOiBzdHJpbmcgfCBudWxsO1xyXG4gIGlzX3ByZW1pdW06IGJvb2xlYW47XHJcbiAgcXJfY29kZTogc3RyaW5nIHwgbnVsbDtcclxuICBzaGFyZWFibGVfbGluazogc3RyaW5nIHwgbnVsbDtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFBob3RvID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgZXZlbnRfaWQ/OiBzdHJpbmcgfCBudWxsOyAvLyBPcHNpb25hbCBrYXJlbmEgYmlzYSBqYWRpIGZvdG8gaG9tZXBhZ2VcclxuICB1cmw6IHN0cmluZztcclxuICB0aHVtYm5haWxfdXJsOiBzdHJpbmcgfCBudWxsO1xyXG4gIHVwbG9hZGVkX2F0OiBzdHJpbmc7XHJcbiAgaXNfaG9tZXBhZ2U6IGJvb2xlYW4gfCBudWxsOyAvLyBUYW1iYWhrYW4gaW5pIGppa2EgYmVsdW0gYWRhXHJcbiAgb3JpZ2luYWxfbmFtZTogc3RyaW5nO1xyXG4gIHVwbG9hZGVyX25hbWU/OiBzdHJpbmcgfCBudWxsO1xyXG4gIGFsYnVtX25hbWU/OiBzdHJpbmcgfCBudWxsO1xyXG4gIGZpbGVuYW1lPzogc3RyaW5nIHwgbnVsbDsgLy8gVGFtYmFoa2FuIGZpbGVuYW1lIGppa2EgcmVxdWlyZWRcclxuICBvcHRpbWl6ZWRfaW1hZ2VzPzogT3B0aW1pemVkSW1hZ2VzIHwgbnVsbDtcclxuICBpbWFnZV9tZXRhZGF0YT86IEltYWdlTWV0YWRhdGEgfCBudWxsO1xyXG4gIGNvbXByZXNzaW9uX3N0YXRzPzogQ29tcHJlc3Npb25TdGF0cyB8IG51bGw7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBPcHRpbWl6ZWRJbWFnZXMgPSB7XHJcbiAgb3JpZ2luYWw6IHsgdXJsOiBzdHJpbmc7IHNpemU6IG51bWJlcjsgd2lkdGg/OiBudW1iZXI7IGhlaWdodD86IG51bWJlcjsgfTtcclxuICB0aHVtYm5haWw6IHsgdXJsOiBzdHJpbmc7IHNpemU6IG51bWJlcjsgfTtcclxuICBzbWFsbDogeyB1cmw6IHN0cmluZzsgc2l6ZTogbnVtYmVyOyB9O1xyXG4gIG1lZGl1bTogeyB1cmw6IHN0cmluZzsgc2l6ZTogbnVtYmVyOyB9O1xyXG4gIGxhcmdlOiB7IHVybDogc3RyaW5nOyBzaXplOiBudW1iZXI7IH07XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBJbWFnZU1ldGFkYXRhID0ge1xyXG4gIHdpZHRoOiBudW1iZXI7XHJcbiAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgZm9ybWF0OiBzdHJpbmc7XHJcbiAgb3JpZ2luYWxfc2l6ZTogbnVtYmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQ29tcHJlc3Npb25TdGF0cyA9IHtcclxuICBvcmlnaW5hbF9zaXplOiBzdHJpbmc7XHJcbiAgb3B0aW1pemVkX3NpemU6IHN0cmluZztcclxuICBzYXZpbmdzOiBudW1iZXI7XHJcbiAgcmF0aW86IHN0cmluZztcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIE1lc3NhZ2UgPSB7XHJcbiAgaWQ6IHN0cmluZztcclxuICBldmVudF9pZDogc3RyaW5nO1xyXG4gIHNlbmRlcl9uYW1lOiBzdHJpbmc7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIHNlbnRfYXQ6IHN0cmluZztcclxuICBoZWFydHM6IG51bWJlcjtcclxuICBndWVzdF9uYW1lPzogc3RyaW5nOyAvLyBBZGQgZ3Vlc3RfbmFtZSBhcyBvcHRpb25hbCBmb3IgY29tcGF0aWJpbGl0eVxyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgU3RhdHMgPSB7XHJcbiAgdG90YWxFdmVudHM6IG51bWJlcjtcclxuICB0b3RhbFBob3RvczogbnVtYmVyO1xyXG4gIHRvdGFsTWVzc2FnZXM6IG51bWJlcjtcclxufTtcclxuXHJcbmNsYXNzIERhdGFiYXNlU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBzdXBhYmFzZTogdHlwZW9mIHN1cGFiYXNlQWRtaW47XHJcbiAgcHJpdmF0ZSBpbWFnZU9wdGltaXplcjogSW1hZ2VPcHRpbWl6ZXJTZXJ2ZXI7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5zdXBhYmFzZSA9IHN1cGFiYXNlQWRtaW47XHJcbiAgICB0aGlzLmltYWdlT3B0aW1pemVyID0gbmV3IEltYWdlT3B0aW1pemVyU2VydmVyKHRoaXMuc3VwYWJhc2UsICdwaG90b3MnKTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBNZXRvZGUgRXZlbnQgLS0tXHJcbiAgYXN5bmMgZ2V0QWxsRXZlbnRzKCk6IFByb21pc2U8RXZlbnRbXT4ge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnZXZlbnRzJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5vcmRlcignZGF0ZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldFB1YmxpY0V2ZW50cygpOiBQcm9taXNlPEV2ZW50W10+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2V2ZW50cycpXHJcbiAgICAgIC5zZWxlY3QoJ2lkLCBuYW1lLCBkYXRlLCBpc19wcmVtaXVtLCBxcl9jb2RlLCBzaGFyZWFibGVfbGluaycpXHJcbiAgICAgIC5pcygnaXNfcHJlbWl1bScsIGZhbHNlKSAvLyBBc3Vtc2kgaGFueWEgZXZlbnQgbm9uLXByZW1pdW0geWFuZyBwdWJsaWssIHNlc3VhaWthbiBqaWthIHBlcmx1XHJcbiAgICAgIC5vcmRlcignZGF0ZScsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEV2ZW50QnlJZChpZDogc3RyaW5nKTogUHJvbWlzZTxFdmVudCB8IG51bGw+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2V2ZW50cycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgaWQpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNyZWF0ZUV2ZW50KGV2ZW50OiBPbWl0PEV2ZW50LCAnaWQnIHwgJ3FyX2NvZGUnIHwgJ3NoYXJlYWJsZV9saW5rJz4pOiBQcm9taXNlPEV2ZW50PiB7XHJcbiAgICAvLyBGaXJzdCwgaW5zZXJ0IHRoZSBldmVudCB0byBnZXQgdGhlIElEXHJcbiAgICBjb25zdCB7IGRhdGE6IG5ld0V2ZW50LCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnZXZlbnRzJylcclxuICAgICAgLmluc2VydChldmVudClcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuICAgIFxyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2VuZXJhdGUgUVIgY29kZSBhbmQgc2hhcmVhYmxlIGxpbmtcclxuICAgICAgY29uc3QgYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCc7XHJcbiAgICAgIGNvbnN0IGV2ZW50VXJsID0gYCR7YmFzZVVybH0vZXZlbnQvJHtuZXdFdmVudC5pZH0/Y29kZT0ke25ld0V2ZW50LmFjY2Vzc19jb2RlfWA7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZW5lcmF0ZSBRUiBjb2RlIHVzaW5nIGEgc2VydmljZSBsaWtlIFFSU2VydmVyLmNvbVxyXG4gICAgICBjb25zdCBxckNvZGVVcmwgPSBgaHR0cHM6Ly9hcGkucXJzZXJ2ZXIuY29tL3YxL2NyZWF0ZS1xci1jb2RlLz9zaXplPTMwMHgzMDAmZGF0YT0ke2VuY29kZVVSSUNvbXBvbmVudChldmVudFVybCl9YDtcclxuICAgICAgXHJcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZXZlbnQgd2l0aCBRUiBjb2RlIGFuZCBzaGFyZWFibGUgbGlua1xyXG4gICAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRFdmVudCwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ2V2ZW50cycpXHJcbiAgICAgICAgLnVwZGF0ZSh7XHJcbiAgICAgICAgICBxcl9jb2RlOiBxckNvZGVVcmwsXHJcbiAgICAgICAgICBzaGFyZWFibGVfbGluazogZXZlbnRVcmxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5lcSgnaWQnLCBuZXdFdmVudC5pZClcclxuICAgICAgICAuc2VsZWN0KClcclxuICAgICAgICAuc2luZ2xlKCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAodXBkYXRlRXJyb3IpIHRocm93IHVwZGF0ZUVycm9yO1xyXG4gICAgICByZXR1cm4gdXBkYXRlZEV2ZW50O1xyXG4gICAgfSBjYXRjaCAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBRUiBjb2RlOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgLy8gUmV0dXJuIHRoZSBldmVudCBldmVuIGlmIFFSIGNvZGUgZ2VuZXJhdGlvbiBmYWlsc1xyXG4gICAgICByZXR1cm4gbmV3RXZlbnQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVFdmVudChpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPEV2ZW50Pik6IFByb21pc2U8RXZlbnQ+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ2V2ZW50cycpXHJcbiAgICAgIC51cGRhdGUodXBkYXRlcylcclxuICAgICAgLmVxKCdpZCcsIGlkKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlRXZlbnQoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxyXG4gICAgICAuZnJvbSgnZXZlbnRzJylcclxuICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgIC5lcSgnaWQnLCBpZCk7XHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgdmVyaWZ5RXZlbnRBY2Nlc3NDb2RlKGV2ZW50SWQ6IHN0cmluZywgY29kZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdldmVudHMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCcpXHJcbiAgICAgIC5lcSgnaWQnLCBldmVudElkKVxyXG4gICAgICAuZXEoJ2FjY2Vzc19jb2RlJywgY29kZSlcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyBhY2Nlc3MgY29kZTonLCBlcnJvcik7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICEhZGF0YTtcclxuICB9XHJcblxyXG4gIC8vIC0tLSBNZXRvZGUgRm90byAtLS1cclxuICBhc3luYyBnZXRFdmVudFBob3RvcyhldmVudElkOiBzdHJpbmcpOiBQcm9taXNlPFBob3RvW10+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Bob3RvcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2V2ZW50X2lkJywgZXZlbnRJZClcclxuICAgICAgLm9yZGVyKCd1cGxvYWRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEhvbWVwYWdlUGhvdG9zKCk6IFByb21pc2U8UGhvdG9bXT4ge1xyXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncGhvdG9zJylcclxuICAgICAgLnNlbGVjdCgnKicpXHJcbiAgICAgIC5lcSgnaXNfaG9tZXBhZ2UnLCB0cnVlKSAvLyBBc3Vtc2kga29sb20gaW5pIGFkYSBkaSB0YWJlbCBwaG90b3NcclxuICAgICAgLm9yZGVyKCd1cGxvYWRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuICAgIGlmIChlcnJvcikge1xyXG4gICAgICAvLyBMb2cgZXJyb3IgeWFuZyBsZWJpaCBzcGVzaWZpayBqaWthIGtvbG9tIHRpZGFrIGRpdGVtdWthblxyXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJzQyUDAxJykgeyAvLyBQb3N0Z3JlU1FMIGVycm9yIGNvZGUgZm9yIHVuZGVmaW5lZF90YWJsZVxyXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIEVycm9yOiBDb2x1bW4gJ2lzX2hvbWVwYWdlJyBkb2VzIG5vdCBleGlzdC4gUGxlYXNlIGFkZCBpdCB0byB5b3VyICdwaG90b3MnIHRhYmxlLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgdmFsaWRhdGVGaWxlRXh0ZW5zaW9uKGZpbGVuYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgIGNvbnN0IGFsbG93ZWRFeHRlbnNpb25zID0gWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJywgJ3dlYnAnXTtcclxuICAgIGNvbnN0IGV4dCA9IGZpbGVuYW1lLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCk7XHJcbiAgICByZXR1cm4gZXh0ID8gYWxsb3dlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0KSA6IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZUZpbGVOYW1lKG9yaWdpbmFsTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGZpbGVFeHQgPSBvcmlnaW5hbE5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKSB8fCAnanBnJztcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCByYW5kb21TdHIgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgOCk7XHJcbiAgICByZXR1cm4gYCR7dGltZXN0YW1wfV8ke3JhbmRvbVN0cn0uJHtmaWxlRXh0fWA7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRFdmVudHMoKTogUHJvbWlzZTxFdmVudFtdPiB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdldmVudHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgLm9yZGVyKCdkYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgcmV0dXJuIGRhdGEgfHwgW107XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRTaW1wbGVDb21wcmVzc2lvbkFuYWx5dGljcygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEdldCBwaG90b3Mgd2l0aCBjb21wcmVzc2lvbiBkYXRhIChzaW1wbGlmaWVkIHZlcnNpb24pXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogcGhvdG9zLCBlcnJvcjogcGhvdG9zRXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncGhvdG9zJylcclxuICAgICAgICAuc2VsZWN0KCcqJylcclxuICAgICAgICAubm90KCdvcHRpbWl6ZWRfaW1hZ2VzJywgJ2lzJywgbnVsbClcclxuICAgICAgICAub3JkZXIoJ3VwbG9hZGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAgICAgLmxpbWl0KDEwMCk7IC8vIExpbWl0IHRvIHJlY2VudCAxMDAgcGhvdG9zXHJcblxyXG4gICAgICBpZiAocGhvdG9zRXJyb3IpIHRocm93IHBob3Rvc0Vycm9yO1xyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIHNpbXBsZSBhbmFseXRpY3NcclxuICAgICAgY29uc3QgdG90YWxQaG90b3MgPSBwaG90b3M/Lmxlbmd0aCB8fCAwO1xyXG4gICAgICBsZXQgdG90YWxPcmlnaW5hbFNpemUgPSAwO1xyXG4gICAgICBsZXQgdG90YWxPcHRpbWl6ZWRTaXplID0gMDtcclxuICAgICAgbGV0IHRvdGFsU2F2aW5nc0J5dGVzID0gMDtcclxuXHJcbiAgICAgIGNvbnN0IHJlY2VudFBob3RvczogYW55W10gPSBbXTtcclxuXHJcbiAgICAgIHBob3Rvcz8uZm9yRWFjaChwaG90byA9PiB7XHJcbiAgICAgICAgaWYgKHBob3RvLmltYWdlX21ldGFkYXRhICYmIHBob3RvLm9wdGltaXplZF9pbWFnZXMpIHtcclxuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU2l6ZSA9IHBob3RvLmltYWdlX21ldGFkYXRhLm9yaWdpbmFsX3NpemUgfHwgMDtcclxuICAgICAgICAgIGNvbnN0IG9wdGltaXplZFNpemUgPSBwaG90by5vcHRpbWl6ZWRfaW1hZ2VzLm1lZGl1bT8uc2l6ZSB8fCAwO1xyXG4gICAgICAgICAgY29uc3Qgc2F2aW5ncyA9IG9yaWdpbmFsU2l6ZSAtIG9wdGltaXplZFNpemU7XHJcbiAgICAgICAgICBjb25zdCBzYXZpbmdzUGVyY2VudGFnZSA9IG9yaWdpbmFsU2l6ZSA+IDAgPyAoc2F2aW5ncyAvIG9yaWdpbmFsU2l6ZSkgKiAxMDAgOiAwO1xyXG5cclxuICAgICAgICAgIHRvdGFsT3JpZ2luYWxTaXplICs9IG9yaWdpbmFsU2l6ZTtcclxuICAgICAgICAgIHRvdGFsT3B0aW1pemVkU2l6ZSArPSBvcHRpbWl6ZWRTaXplO1xyXG4gICAgICAgICAgdG90YWxTYXZpbmdzQnl0ZXMgKz0gc2F2aW5ncztcclxuXHJcbiAgICAgICAgICAvLyBSZWNlbnQgcGhvdG9zICh0b3AgMTApXHJcbiAgICAgICAgICBpZiAocmVjZW50UGhvdG9zLmxlbmd0aCA8IDEwKSB7XHJcbiAgICAgICAgICAgIHJlY2VudFBob3Rvcy5wdXNoKHtcclxuICAgICAgICAgICAgICBpZDogcGhvdG8uaWQsXHJcbiAgICAgICAgICAgICAgb3JpZ2luYWxfbmFtZTogcGhvdG8ub3JpZ2luYWxfbmFtZSxcclxuICAgICAgICAgICAgICBvcmlnaW5hbF9zaXplOiBvcmlnaW5hbFNpemUsXHJcbiAgICAgICAgICAgICAgb3B0aW1pemVkX3NpemU6IG9wdGltaXplZFNpemUsXHJcbiAgICAgICAgICAgICAgc2F2aW5nc19wZXJjZW50YWdlOiBzYXZpbmdzUGVyY2VudGFnZSxcclxuICAgICAgICAgICAgICB1cGxvYWRlZF9hdDogcGhvdG8udXBsb2FkZWRfYXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHRvdGFsU2F2aW5nc1BlcmNlbnRhZ2UgPSB0b3RhbE9yaWdpbmFsU2l6ZSA+IDAgPyAodG90YWxTYXZpbmdzQnl0ZXMgLyB0b3RhbE9yaWdpbmFsU2l6ZSkgKiAxMDAgOiAwO1xyXG4gICAgICBjb25zdCBhdmVyYWdlQ29tcHJlc3Npb25SYXRpbyA9IHRvdGFsT3B0aW1pemVkU2l6ZSA+IDAgPyB0b3RhbE9yaWdpbmFsU2l6ZSAvIHRvdGFsT3B0aW1pemVkU2l6ZSA6IDE7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHRvdGFsUGhvdG9zLFxyXG4gICAgICAgIHRvdGFsT3JpZ2luYWxTaXplLFxyXG4gICAgICAgIHRvdGFsT3B0aW1pemVkU2l6ZSxcclxuICAgICAgICB0b3RhbFNhdmluZ3NCeXRlcyxcclxuICAgICAgICB0b3RhbFNhdmluZ3NQZXJjZW50YWdlLFxyXG4gICAgICAgIHN0b3JhZ2VTYXZlZDogdGhpcy5mb3JtYXRGaWxlU2l6ZSh0b3RhbFNhdmluZ3NCeXRlcyksXHJcbiAgICAgICAgYXZlcmFnZUNvbXByZXNzaW9uUmF0aW8sXHJcbiAgICAgICAgcmVjZW50UGhvdG9zOiByZWNlbnRQaG90b3Muc29ydCgoYSwgYikgPT4gYi5zYXZpbmdzX3BlcmNlbnRhZ2UgLSBhLnNhdmluZ3NfcGVyY2VudGFnZSlcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgc2ltcGxlIGNvbXByZXNzaW9uIGFuYWx5dGljczonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEJ5dGVzJztcclxuICAgIGNvbnN0IGsgPSAxMDI0O1xyXG4gICAgY29uc3Qgc2l6ZXMgPSBbJ0J5dGVzJywgJ0tCJywgJ01CJywgJ0dCJ107XHJcbiAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XHJcbiAgICByZXR1cm4gcGFyc2VGbG9hdCgoYnl0ZXMgLyBNYXRoLnBvdyhrLCBpKSkudG9GaXhlZCgyKSkgKyAnICcgKyBzaXplc1tpXTtcclxuICB9XHJcblxyXG4gIGFzeW5jIHZhbGlkYXRlRXZlbnRBY2Nlc3MoZXZlbnRJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdldmVudHMnKVxyXG4gICAgICAuc2VsZWN0KCdpZCwgaXNfcHJlbWl1bScpXHJcbiAgICAgIC5lcSgnaWQnLCBldmVudElkKVxyXG4gICAgICAuc2luZ2xlKCk7XHJcbiAgICBcclxuICAgIGlmIChlcnJvciB8fCAhZGF0YSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IG5vdCBmb3VuZCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGxvYWRFdmVudFBob3RvKGV2ZW50SWQ6IHN0cmluZywgZmlsZTogRmlsZSwgdXBsb2FkZXJOYW1lOiBzdHJpbmcgPSAnQW5vbnltb3VzJywgYWxidW1OYW1lOiBzdHJpbmcgPSAnVGFtdScpOiBQcm9taXNlPFBob3RvPiB7XHJcbiAgICAvLyBWYWxpZGF0ZSBldmVudElkIGV4aXN0c1xyXG4gICAgYXdhaXQgdGhpcy52YWxpZGF0ZUV2ZW50QWNjZXNzKGV2ZW50SWQpO1xyXG5cclxuICAgIC8vIFZhbGlkYXRlIGZpbGUgZXh0ZW5zaW9uXHJcbiAgICBpZiAoIXRoaXMudmFsaWRhdGVGaWxlRXh0ZW5zaW9uKGZpbGUubmFtZSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGZpbGUgdHlwZS4gQWxsb3dlZDoganBnLCBqcGVnLCBwbmcsIGdpZiwgd2VicCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIENvbnZlcnQgRmlsZSB0byBCdWZmZXIgZm9yIHNlcnZlci1zaWRlIHByb2Nlc3NpbmdcclxuICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKCk7XHJcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFByb2Nlc3MgaW1hZ2Ugd2l0aCBvcHRpbWl6YXRpb24gKHNlcnZlci1zaWRlKVxyXG4gICAgICBjb25zdCBvcHRpbWl6ZWRJbWFnZXMgPSBhd2FpdCB0aGlzLmltYWdlT3B0aW1pemVyLnByb2Nlc3NJbWFnZShidWZmZXIsIGZpbGUubmFtZSwgYGV2ZW50cy8ke2V2ZW50SWR9YCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgaW1hZ2UgbWV0YWRhdGFcclxuICAgICAgY29uc3Qgc2hhcnAgPSAoYXdhaXQgaW1wb3J0KCdzaGFycCcpKS5kZWZhdWx0O1xyXG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHNoYXJwKGJ1ZmZlcikubWV0YWRhdGEoKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGltYWdlTWV0YWRhdGEgPSB7XHJcbiAgICAgICAgd2lkdGg6IG1ldGFkYXRhLndpZHRoIHx8IDAsXHJcbiAgICAgICAgaGVpZ2h0OiBtZXRhZGF0YS5oZWlnaHQgfHwgMCxcclxuICAgICAgICBmb3JtYXQ6IG1ldGFkYXRhLmZvcm1hdCB8fCAnanBlZycsXHJcbiAgICAgICAgb3JpZ2luYWxfc2l6ZTogYnVmZmVyLmxlbmd0aFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQ2FsY3VsYXRlIGNvbXByZXNzaW9uIHN0YXRzXHJcbiAgICAgIGNvbnN0IGNvbXByZXNzaW9uU3RhdHMgPSBJbWFnZU9wdGltaXplclNlcnZlci5nZXRDb21wcmVzc2lvblN0YXRzKG9wdGltaXplZEltYWdlcyk7XHJcblxyXG4gICAgICBjb25zdCB7IGRhdGE6IHBob3RvRGF0YSwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Bob3RvcycpXHJcbiAgICAgICAgLmluc2VydCh7IFxyXG4gICAgICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsXHJcbiAgICAgICAgICB1cmw6IG9wdGltaXplZEltYWdlcy5vcmlnaW5hbC51cmwsIC8vIEtlZXAgb3JpZ2luYWwgVVJMIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcbiAgICAgICAgICB0aHVtYm5haWxfdXJsOiBvcHRpbWl6ZWRJbWFnZXMudGh1bWJuYWlsLnVybCxcclxuICAgICAgICAgIG9yaWdpbmFsX25hbWU6IGZpbGUubmFtZSxcclxuICAgICAgICAgIHVwbG9hZGVyX25hbWU6IHVwbG9hZGVyTmFtZSxcclxuICAgICAgICAgIGFsYnVtX25hbWU6IGFsYnVtTmFtZSxcclxuICAgICAgICAgIGlzX2hvbWVwYWdlOiBmYWxzZSxcclxuICAgICAgICAgIGZpbGVuYW1lOiB0aGlzLmdlbmVyYXRlRmlsZU5hbWUoZmlsZS5uYW1lKSxcclxuICAgICAgICAgIG9wdGltaXplZF9pbWFnZXM6IG9wdGltaXplZEltYWdlcyxcclxuICAgICAgICAgIGltYWdlX21ldGFkYXRhOiBpbWFnZU1ldGFkYXRhLFxyXG4gICAgICAgICAgY29tcHJlc3Npb25fc3RhdHM6IGNvbXByZXNzaW9uU3RhdHNcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5zZWxlY3QoKVxyXG4gICAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICAgIGlmIChpbnNlcnRFcnJvcikgdGhyb3cgaW5zZXJ0RXJyb3I7XHJcbiAgICAgIHJldHVybiBwaG90b0RhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGxvYWRpbmcgb3B0aW1pemVkIGV2ZW50IHBob3RvOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGxvYWRIb21lcGFnZVBob3RvKGZpbGU6IEZpbGUpOiBQcm9taXNlPFBob3RvPiB7XHJcbiAgICAvLyBWYWxpZGF0ZSBmaWxlIGV4dGVuc2lvblxyXG4gICAgaWYgKCF0aGlzLnZhbGlkYXRlRmlsZUV4dGVuc2lvbihmaWxlLm5hbWUpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBmaWxlIHR5cGUuIEFsbG93ZWQ6IGpwZywganBlZywgcG5nLCBnaWYsIHdlYnAnKTtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBDb252ZXJ0IEZpbGUgdG8gQnVmZmVyIGZvciBzZXJ2ZXItc2lkZSBwcm9jZXNzaW5nXHJcbiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xyXG4gICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcik7XHJcbiAgICAgIFxyXG4gICAgICAvLyBQcm9jZXNzIGltYWdlIHdpdGggb3B0aW1pemF0aW9uIChzZXJ2ZXItc2lkZSlcclxuICAgICAgY29uc3Qgb3B0aW1pemVkSW1hZ2VzID0gYXdhaXQgdGhpcy5pbWFnZU9wdGltaXplci5wcm9jZXNzSW1hZ2UoYnVmZmVyLCBmaWxlLm5hbWUsICdob21lcGFnZScpO1xyXG4gICAgICBcclxuICAgICAgLy8gR2V0IGltYWdlIG1ldGFkYXRhXHJcbiAgICAgIGNvbnN0IHNoYXJwID0gKGF3YWl0IGltcG9ydCgnc2hhcnAnKSkuZGVmYXVsdDtcclxuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCBzaGFycChidWZmZXIpLm1ldGFkYXRhKCk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBpbWFnZU1ldGFkYXRhID0ge1xyXG4gICAgICAgIHdpZHRoOiBtZXRhZGF0YS53aWR0aCB8fCAwLFxyXG4gICAgICAgIGhlaWdodDogbWV0YWRhdGEuaGVpZ2h0IHx8IDAsXHJcbiAgICAgICAgZm9ybWF0OiBtZXRhZGF0YS5mb3JtYXQgfHwgJ2pwZWcnLFxyXG4gICAgICAgIG9yaWdpbmFsX3NpemU6IGJ1ZmZlci5sZW5ndGhcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIENhbGN1bGF0ZSBjb21wcmVzc2lvbiBzdGF0c1xyXG4gICAgICBjb25zdCBjb21wcmVzc2lvblN0YXRzID0gSW1hZ2VPcHRpbWl6ZXJTZXJ2ZXIuZ2V0Q29tcHJlc3Npb25TdGF0cyhvcHRpbWl6ZWRJbWFnZXMpO1xyXG5cclxuICAgICAgY29uc3QgeyBkYXRhOiBwaG90b0RhdGEsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCdwaG90b3MnKVxyXG4gICAgICAgIC5pbnNlcnQoeyBcclxuICAgICAgICAgIHVybDogb3B0aW1pemVkSW1hZ2VzLm9yaWdpbmFsLnVybCwgLy8gS2VlcCBvcmlnaW5hbCBVUkwgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcclxuICAgICAgICAgIHRodW1ibmFpbF91cmw6IG9wdGltaXplZEltYWdlcy50aHVtYm5haWwudXJsLFxyXG4gICAgICAgICAgb3JpZ2luYWxfbmFtZTogZmlsZS5uYW1lLFxyXG4gICAgICAgICAgaXNfaG9tZXBhZ2U6IHRydWUsXHJcbiAgICAgICAgICBldmVudF9pZDogbnVsbCxcclxuICAgICAgICAgIHVwbG9hZGVyX25hbWU6ICdBZG1pbicsXHJcbiAgICAgICAgICBhbGJ1bV9uYW1lOiAnSG9tZXBhZ2UnLFxyXG4gICAgICAgICAgZmlsZW5hbWU6IHRoaXMuZ2VuZXJhdGVGaWxlTmFtZShmaWxlLm5hbWUpLFxyXG4gICAgICAgICAgb3B0aW1pemVkX2ltYWdlczogb3B0aW1pemVkSW1hZ2VzLFxyXG4gICAgICAgICAgaW1hZ2VfbWV0YWRhdGE6IGltYWdlTWV0YWRhdGEsXHJcbiAgICAgICAgICBjb21wcmVzc2lvbl9zdGF0czogY29tcHJlc3Npb25TdGF0c1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnNlbGVjdCgpXHJcbiAgICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgICAgaWYgKGluc2VydEVycm9yKSB0aHJvdyBpbnNlcnRFcnJvcjtcclxuICAgICAgcmV0dXJuIHBob3RvRGF0YTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwbG9hZGluZyBvcHRpbWl6ZWQgaG9tZXBhZ2UgcGhvdG86JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBhc3luYyBnZXRQaG90b0J5SWQocGhvdG9JZDogc3RyaW5nKTogUHJvbWlzZTxQaG90byB8IG51bGw+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3Bob3RvcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2lkJywgcGhvdG9JZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVQaG90byhwaG90b0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIC8vIEdldCBwaG90byBkZXRhaWxzXHJcbiAgICBjb25zdCBwaG90byA9IGF3YWl0IHRoaXMuZ2V0UGhvdG9CeUlkKHBob3RvSWQpO1xyXG4gICAgaWYgKCFwaG90bykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Bob3RvIG5vdCBmb3VuZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEV4dHJhY3QgZmlsZSBwYXRoIGZyb20gVVJMIG9yIHVzZSBzdG9yZWQgZmlsZW5hbWVcclxuICAgICAgbGV0IGZpbGVQYXRoOiBzdHJpbmc7XHJcbiAgICAgIFxyXG4gICAgICBpZiAocGhvdG8uZmlsZW5hbWUpIHtcclxuICAgICAgICAvLyBVc2Ugc3RvcmVkIGZpbGVuYW1lIGlmIGF2YWlsYWJsZVxyXG4gICAgICAgIGlmIChwaG90by5pc19ob21lcGFnZSkge1xyXG4gICAgICAgICAgZmlsZVBhdGggPSBgaG9tZXBhZ2UvJHtwaG90by5maWxlbmFtZX1gO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGhvdG8uZXZlbnRfaWQpIHtcclxuICAgICAgICAgIGZpbGVQYXRoID0gYGV2ZW50cy8ke3Bob3RvLmV2ZW50X2lkfS8ke3Bob3RvLmZpbGVuYW1lfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIHN0cnVjdHVyZSBpcyB1bmNsZWFyXHJcbiAgICAgICAgICBmaWxlUGF0aCA9IHBob3RvLmZpbGVuYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBFeHRyYWN0IGZyb20gVVJMIGFzIGZhbGxiYWNrXHJcbiAgICAgICAgY29uc3QgdXJsUGFydHMgPSBwaG90by51cmwuc3BsaXQoJy8nKTtcclxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHVybFBhcnRzW3VybFBhcnRzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChwaG90by5pc19ob21lcGFnZSkge1xyXG4gICAgICAgICAgZmlsZVBhdGggPSBgaG9tZXBhZ2UvJHtmaWxlTmFtZX1gO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGhvdG8uZXZlbnRfaWQpIHtcclxuICAgICAgICAgIGZpbGVQYXRoID0gYGV2ZW50cy8ke3Bob3RvLmV2ZW50X2lkfS8ke2ZpbGVOYW1lfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIHN0cnVjdHVyZSBpcyB1bmNsZWFyXHJcbiAgICAgICAgICBmaWxlUGF0aCA9IGZpbGVOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRGVsZXRlIGZyb20gc3RvcmFnZSBmaXJzdFxyXG4gICAgICBjb25zdCB7IGVycm9yOiBkZWxldGVTdG9yYWdlRXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgICAgIC5mcm9tKCdwaG90b3MnKVxyXG4gICAgICAgIC5yZW1vdmUoW2ZpbGVQYXRoXSk7XHJcblxyXG4gICAgICBpZiAoZGVsZXRlU3RvcmFnZUVycm9yKSB7XHJcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBmaWxlIGZyb20gc3RvcmFnZTonLCBkZWxldGVTdG9yYWdlRXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDb250aW51ZSB3aXRoIGRhdGFiYXNlIGRlbGV0aW9uIGV2ZW4gaWYgc3RvcmFnZSBkZWxldGlvbiBmYWlsc1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBUaGVuIGRlbGV0ZSBmcm9tIGRhdGFiYXNlXHJcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGRlbGV0ZURiRXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgICAuZnJvbSgncGhvdG9zJylcclxuICAgICAgICAuZGVsZXRlKClcclxuICAgICAgICAuZXEoJ2lkJywgcGhvdG9JZCk7XHJcblxyXG4gICAgICBpZiAoZGVsZXRlRGJFcnJvcikgdGhyb3cgZGVsZXRlRGJFcnJvcjtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIElmIGl0J3Mgbm90IGEgc3RvcmFnZSBlcnJvciwgcmV0aHJvd1xyXG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnc3RvcmFnZScpKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEZvciBzdG9yYWdlIGVycm9ycywgdHJ5IHRvIGRlbGV0ZSBmcm9tIGRhdGFiYXNlIGFueXdheVxyXG4gICAgICBjb25zdCB7IGVycm9yOiBkZWxldGVEYkVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgICAgLmZyb20oJ3Bob3RvcycpXHJcbiAgICAgICAgLmRlbGV0ZSgpXHJcbiAgICAgICAgLmVxKCdpZCcsIHBob3RvSWQpO1xyXG4gICAgICAgIFxyXG4gICAgICBpZiAoZGVsZXRlRGJFcnJvcikgdGhyb3cgZGVsZXRlRGJFcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGxpa2VQaG90byhwaG90b0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2UucnBjKCdpbmNyZW1lbnRfbGlrZXMnLCB7IHBob3RvX2lkOiBwaG90b0lkIH0pOyAvLyBQYW5nZ2lsIGZ1bmdzaSBSUENcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuXHJcbiAgLy8gLS0tIE1ldG9kZSBQZXNhbiAtLS1cclxuICBhc3luYyBnZXRFdmVudE1lc3NhZ2VzKGV2ZW50SWQ6IHN0cmluZyk6IFByb21pc2U8TWVzc2FnZVtdPiB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdtZXNzYWdlcycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAuZXEoJ2V2ZW50X2lkJywgZXZlbnRJZClcclxuICAgICAgLm9yZGVyKCdzZW50X2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY3JlYXRlTWVzc2FnZShtZXNzYWdlOiBPbWl0PE1lc3NhZ2UsICdpZCcgfCAnc2VudF9hdCcgfCAnaGVhcnRzJz4pOiBQcm9taXNlPE1lc3NhZ2U+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ21lc3NhZ2VzJylcclxuICAgICAgLmluc2VydChtZXNzYWdlKVxyXG4gICAgICAuc2VsZWN0KClcclxuICAgICAgLnNpbmdsZSgpO1xyXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcclxuICAgIHJldHVybiBkYXRhO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgaGVhcnRNZXNzYWdlKG1lc3NhZ2VJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlLnJwYygnaW5jcmVtZW50X2hlYXJ0cycsIHsgbWVzc2FnZV9pZDogbWVzc2FnZUlkIH0pOyAvLyBQYW5nZ2lsIGZ1bmdzaSBSUENcclxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG5cclxuICAvLyAtLS0gTWV0b2RlIFN0YXRpc3RpayAtLS1cclxuICBhc3luYyBnZXRTdGF0cygpOiBQcm9taXNlPFN0YXRzPiB7XHJcbiAgICBjb25zdCB7IGNvdW50OiB0b3RhbEV2ZW50cywgZXJyb3I6IGV2ZW50c0Vycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdldmVudHMnKVxyXG4gICAgICAuc2VsZWN0KCcqJywgeyBjb3VudDogJ2V4YWN0JywgaGVhZDogdHJ1ZSB9KTtcclxuICAgIGlmIChldmVudHNFcnJvcikgdGhyb3cgZXZlbnRzRXJyb3I7XHJcblxyXG4gICAgY29uc3QgeyBjb3VudDogdG90YWxQaG90b3MsIGVycm9yOiBwaG90b3NFcnJvciB9ID0gYXdhaXQgdGhpcy5zdXBhYmFzZVxyXG4gICAgICAuZnJvbSgncGhvdG9zJylcclxuICAgICAgLnNlbGVjdCgnKicsIHsgY291bnQ6ICdleGFjdCcsIGhlYWQ6IHRydWUgfSk7XHJcbiAgICBpZiAocGhvdG9zRXJyb3IpIHRocm93IHBob3Rvc0Vycm9yO1xyXG5cclxuICAgIGNvbnN0IHsgY291bnQ6IHRvdGFsTWVzc2FnZXMsIGVycm9yOiBtZXNzYWdlc0Vycm9yIH0gPSBhd2FpdCB0aGlzLnN1cGFiYXNlXHJcbiAgICAgIC5mcm9tKCdtZXNzYWdlcycpXHJcbiAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pO1xyXG4gICAgaWYgKG1lc3NhZ2VzRXJyb3IpIHRocm93IG1lc3NhZ2VzRXJyb3I7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdG90YWxFdmVudHM6IHRvdGFsRXZlbnRzIHx8IDAsXHJcbiAgICAgIHRvdGFsUGhvdG9zOiB0b3RhbFBob3RvcyB8fCAwLFxyXG4gICAgICB0b3RhbE1lc3NhZ2VzOiB0b3RhbE1lc3NhZ2VzIHx8IDAsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRhdGFiYXNlID0gbmV3IERhdGFiYXNlU2VydmljZSgpOyAiXSwibmFtZXMiOlsic3VwYWJhc2VBZG1pbiIsIkltYWdlT3B0aW1pemVyU2VydmVyIiwiRGF0YWJhc2VTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJzdXBhYmFzZSIsImltYWdlT3B0aW1pemVyIiwiZ2V0QWxsRXZlbnRzIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwiZ2V0UHVibGljRXZlbnRzIiwiaXMiLCJnZXRFdmVudEJ5SWQiLCJpZCIsImVxIiwic2luZ2xlIiwiY3JlYXRlRXZlbnQiLCJldmVudCIsIm5ld0V2ZW50IiwiaW5zZXJ0IiwiYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUFBfVVJMIiwiZXZlbnRVcmwiLCJhY2Nlc3NfY29kZSIsInFyQ29kZVVybCIsImVuY29kZVVSSUNvbXBvbmVudCIsInVwZGF0ZWRFdmVudCIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwicXJfY29kZSIsInNoYXJlYWJsZV9saW5rIiwiY29uc29sZSIsInVwZGF0ZUV2ZW50IiwidXBkYXRlcyIsImRlbGV0ZUV2ZW50IiwiZGVsZXRlIiwidmVyaWZ5RXZlbnRBY2Nlc3NDb2RlIiwiZXZlbnRJZCIsImNvZGUiLCJnZXRFdmVudFBob3RvcyIsImdldEhvbWVwYWdlUGhvdG9zIiwidmFsaWRhdGVGaWxlRXh0ZW5zaW9uIiwiZmlsZW5hbWUiLCJhbGxvd2VkRXh0ZW5zaW9ucyIsImV4dCIsInNwbGl0IiwicG9wIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsImdlbmVyYXRlRmlsZU5hbWUiLCJvcmlnaW5hbE5hbWUiLCJmaWxlRXh0IiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInJhbmRvbVN0ciIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImdldEV2ZW50cyIsImdldFNpbXBsZUNvbXByZXNzaW9uQW5hbHl0aWNzIiwicGhvdG9zIiwicGhvdG9zRXJyb3IiLCJub3QiLCJsaW1pdCIsInRvdGFsUGhvdG9zIiwibGVuZ3RoIiwidG90YWxPcmlnaW5hbFNpemUiLCJ0b3RhbE9wdGltaXplZFNpemUiLCJ0b3RhbFNhdmluZ3NCeXRlcyIsInJlY2VudFBob3RvcyIsImZvckVhY2giLCJwaG90byIsImltYWdlX21ldGFkYXRhIiwib3B0aW1pemVkX2ltYWdlcyIsIm9yaWdpbmFsU2l6ZSIsIm9yaWdpbmFsX3NpemUiLCJvcHRpbWl6ZWRTaXplIiwibWVkaXVtIiwic2l6ZSIsInNhdmluZ3MiLCJzYXZpbmdzUGVyY2VudGFnZSIsInB1c2giLCJvcmlnaW5hbF9uYW1lIiwib3B0aW1pemVkX3NpemUiLCJzYXZpbmdzX3BlcmNlbnRhZ2UiLCJ1cGxvYWRlZF9hdCIsInRvdGFsU2F2aW5nc1BlcmNlbnRhZ2UiLCJhdmVyYWdlQ29tcHJlc3Npb25SYXRpbyIsInN0b3JhZ2VTYXZlZCIsImZvcm1hdEZpbGVTaXplIiwic29ydCIsImEiLCJiIiwiYnl0ZXMiLCJrIiwic2l6ZXMiLCJpIiwiZmxvb3IiLCJsb2ciLCJwYXJzZUZsb2F0IiwicG93IiwidG9GaXhlZCIsInZhbGlkYXRlRXZlbnRBY2Nlc3MiLCJFcnJvciIsInVwbG9hZEV2ZW50UGhvdG8iLCJmaWxlIiwidXBsb2FkZXJOYW1lIiwiYWxidW1OYW1lIiwibmFtZSIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiQnVmZmVyIiwib3B0aW1pemVkSW1hZ2VzIiwicHJvY2Vzc0ltYWdlIiwic2hhcnAiLCJkZWZhdWx0IiwibWV0YWRhdGEiLCJpbWFnZU1ldGFkYXRhIiwid2lkdGgiLCJoZWlnaHQiLCJmb3JtYXQiLCJjb21wcmVzc2lvblN0YXRzIiwiZ2V0Q29tcHJlc3Npb25TdGF0cyIsInBob3RvRGF0YSIsImluc2VydEVycm9yIiwiZXZlbnRfaWQiLCJ1cmwiLCJvcmlnaW5hbCIsInRodW1ibmFpbF91cmwiLCJ0aHVtYm5haWwiLCJ1cGxvYWRlcl9uYW1lIiwiYWxidW1fbmFtZSIsImlzX2hvbWVwYWdlIiwiY29tcHJlc3Npb25fc3RhdHMiLCJ1cGxvYWRIb21lcGFnZVBob3RvIiwiZ2V0UGhvdG9CeUlkIiwicGhvdG9JZCIsImRlbGV0ZVBob3RvIiwiZmlsZVBhdGgiLCJ1cmxQYXJ0cyIsImZpbGVOYW1lIiwiZGVsZXRlU3RvcmFnZUVycm9yIiwic3RvcmFnZSIsInJlbW92ZSIsImRlbGV0ZURiRXJyb3IiLCJtZXNzYWdlIiwibGlrZVBob3RvIiwicnBjIiwicGhvdG9faWQiLCJnZXRFdmVudE1lc3NhZ2VzIiwiY3JlYXRlTWVzc2FnZSIsImhlYXJ0TWVzc2FnZSIsIm1lc3NhZ2VJZCIsIm1lc3NhZ2VfaWQiLCJnZXRTdGF0cyIsImNvdW50IiwidG90YWxFdmVudHMiLCJldmVudHNFcnJvciIsImhlYWQiLCJ0b3RhbE1lc3NhZ2VzIiwibWVzc2FnZXNFcnJvciIsImRhdGFiYXNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/image-optimizer-server.ts":
/*!*******************************************!*\
  !*** ./src/lib/image-optimizer-server.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImageOptimizerServer: () => (/* binding */ ImageOptimizerServer)\n/* harmony export */ });\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_0__);\n/**\r\n * Server-side Image Optimization Service\r\n * Handles compression, resizing, and format conversion on the server\r\n */ \nclass ImageOptimizerServer {\n    constructor(supabase, bucketName = \"photos\"){\n        this.supabase = supabase;\n        this.bucketName = bucketName;\n    }\n    /**\r\n   * Generate filename for different sizes\r\n   */ generateFilename(originalName, size, timestamp) {\n        const ext = originalName.split(\".\").pop()?.toLowerCase() || \"jpg\";\n        const nameWithoutExt = originalName.replace(/\\.[^/.]+$/, \"\");\n        const cleanName = nameWithoutExt.replace(/[^a-zA-Z0-9]/g, \"_\");\n        return `${timestamp}_${cleanName}_${size}.${ext}`;\n    }\n    /**\r\n   * Optimize single image to specific size\r\n   */ async optimizeImage(buffer, width, height, quality) {\n        return await sharp__WEBPACK_IMPORTED_MODULE_0___default()(buffer).resize(width, height, {\n            fit: \"inside\",\n            withoutEnlargement: true,\n            background: {\n                r: 255,\n                g: 255,\n                b: 255,\n                alpha: 1\n            }\n        }).jpeg({\n            quality,\n            progressive: true,\n            mozjpeg: true\n        }).toBuffer();\n    }\n    /**\r\n   * Get image metadata\r\n   */ async getImageMetadata(buffer) {\n        const metadata = await sharp__WEBPACK_IMPORTED_MODULE_0___default()(buffer).metadata();\n        return {\n            width: metadata.width || 0,\n            height: metadata.height || 0,\n            format: metadata.format || \"jpeg\",\n            size: buffer.length\n        };\n    }\n    /**\r\n   * Upload buffer to Supabase Storage\r\n   */ async uploadToStorage(buffer, filePath, contentType = \"image/jpeg\") {\n        const { data, error } = await this.supabase.storage.from(this.bucketName).upload(filePath, buffer, {\n            contentType,\n            cacheControl: \"31536000\",\n            upsert: false\n        });\n        if (error) throw error;\n        const { data: publicUrlData } = this.supabase.storage.from(this.bucketName).getPublicUrl(data.path);\n        return publicUrlData.publicUrl;\n    }\n    /**\r\n   * Process and optimize image for all sizes (SERVER-SIDE ONLY)\r\n   */ async processImage(buffer, originalName, folder = \"optimized\") {\n        try {\n            // Get original metadata\n            const originalMetadata = await this.getImageMetadata(buffer);\n            const timestamp = Date.now();\n            const randomId = Math.random().toString(36).substring(2, 8);\n            // Define sizes\n            const sizes = {\n                thumbnail: {\n                    width: 300,\n                    height: 225,\n                    quality: 85\n                },\n                small: {\n                    width: 800,\n                    height: 600,\n                    quality: 90\n                },\n                medium: {\n                    width: 1200,\n                    height: 900,\n                    quality: 92\n                },\n                large: {\n                    width: 1920,\n                    height: 1440,\n                    quality: 95\n                }\n            };\n            // Upload original\n            const originalPath = `${folder}/original/${timestamp}_${randomId}_original.jpg`;\n            const originalUrl = await this.uploadToStorage(buffer, originalPath);\n            // Process and upload optimized versions\n            const results = {\n                original: {\n                    url: originalUrl,\n                    size: originalMetadata.size,\n                    width: originalMetadata.width,\n                    height: originalMetadata.height\n                },\n                thumbnail: {\n                    url: \"\",\n                    size: 0\n                },\n                small: {\n                    url: \"\",\n                    size: 0\n                },\n                medium: {\n                    url: \"\",\n                    size: 0\n                },\n                large: {\n                    url: \"\",\n                    size: 0\n                }\n            };\n            // Process each size\n            for (const [sizeName, config] of Object.entries(sizes)){\n                const optimizedBuffer = await this.optimizeImage(buffer, config.width, config.height, config.quality);\n                const optimizedPath = `${folder}/${sizeName}/${timestamp}_${randomId}_${sizeName}.jpg`;\n                const optimizedUrl = await this.uploadToStorage(optimizedBuffer, optimizedPath);\n                results[sizeName] = {\n                    url: optimizedUrl,\n                    size: optimizedBuffer.length\n                };\n            }\n            return results;\n        } catch (error) {\n            console.error(\"Image processing error:\", error);\n            throw new Error(\"Failed to process image\");\n        }\n    }\n    /**\r\n   * Get appropriate image URL based on viewport/usage\r\n   */ static getOptimalImageUrl(images, usage) {\n        switch(usage){\n            case \"thumbnail\":\n                return images.thumbnail.url;\n            case \"gallery\":\n                return images.medium.url;\n            case \"lightbox\":\n                return images.large.url;\n            case \"download\":\n                return images.original.url;\n            case \"mobile\":\n                return images.small.url;\n            default:\n                return images.medium.url;\n        }\n    }\n    /**\r\n   * Get responsive image sources for different screen sizes\r\n   */ static getResponsiveSources(images) {\n        return {\n            srcSet: [\n                `${images.small.url} 800w`,\n                `${images.medium.url} 1200w`,\n                `${images.large.url} 1920w`\n            ].join(\", \"),\n            sizes: [\n                \"(max-width: 768px) 800px\",\n                \"(max-width: 1200px) 1200px\",\n                \"1920px\"\n            ].join(\", \"),\n            src: images.medium.url,\n            placeholder: images.thumbnail.url\n        };\n    }\n    /**\r\n   * Calculate compression savings\r\n   */ static getCompressionStats(images) {\n        const originalSize = images.original.size;\n        const optimizedSize = images.medium.size;\n        const savings = (originalSize - optimizedSize) / originalSize * 100;\n        return {\n            originalSize: this.formatFileSize(originalSize),\n            optimizedSize: this.formatFileSize(optimizedSize),\n            savings: Math.round(savings),\n            ratio: `${Math.round(originalSize / optimizedSize)}:1`\n        };\n    }\n    /**\r\n   * Format file size for display\r\n   */ static formatFileSize(bytes) {\n        if (bytes === 0) return \"0 Bytes\";\n        const k = 1024;\n        const sizes = [\n            \"Bytes\",\n            \"KB\",\n            \"MB\",\n            \"GB\"\n        ];\n        const i = Math.floor(Math.log(bytes) / Math.log(k));\n        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + \" \" + sizes[i];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d0IsSUFBSSxDQUFDO1lBQ1BDLEtBQUtMLE9BQU9qQixNQUFNLENBQUNNLEdBQUc7WUFDdEJpQixhQUFhTixPQUFPbkIsU0FBUyxDQUFDUSxHQUFHO1FBQ25DO0lBQ0Y7SUFFQTs7R0FFQyxHQUNELE9BQU9rQixvQkFBb0JQLE1BQXVCLEVBQUU7UUFDbEQsTUFBTVEsZUFBZVIsT0FBT1osUUFBUSxDQUFDOUQsSUFBSTtRQUN6QyxNQUFNbUYsZ0JBQWdCVCxPQUFPakIsTUFBTSxDQUFDekQsSUFBSTtRQUN4QyxNQUFNb0YsVUFBVSxDQUFFRixlQUFlQyxhQUFZLElBQUtELGVBQWdCO1FBRWxFLE9BQU87WUFDTEEsY0FBYyxJQUFJLENBQUNHLGNBQWMsQ0FBQ0g7WUFDbENDLGVBQWUsSUFBSSxDQUFDRSxjQUFjLENBQUNGO1lBQ25DQyxTQUFTbEMsS0FBS29DLEtBQUssQ0FBQ0Y7WUFDcEJHLE9BQU8sQ0FBQyxFQUFFckMsS0FBS29DLEtBQUssQ0FBQ0osZUFBZUMsZUFBZSxFQUFFLENBQUM7UUFDeEQ7SUFDRjtJQUVBOztHQUVDLEdBQ0QsT0FBT0UsZUFBZUcsS0FBYSxFQUFVO1FBQzNDLElBQUlBLFVBQVUsR0FBRyxPQUFPO1FBQ3hCLE1BQU1DLElBQUk7UUFDVixNQUFNbkMsUUFBUTtZQUFDO1lBQVM7WUFBTTtZQUFNO1NBQUs7UUFDekMsTUFBTW9DLElBQUl4QyxLQUFLeUMsS0FBSyxDQUFDekMsS0FBSzBDLEdBQUcsQ0FBQ0osU0FBU3RDLEtBQUswQyxHQUFHLENBQUNIO1FBQ2hELE9BQU9JLFdBQVcsQ0FBQ0wsUUFBUXRDLEtBQUs0QyxHQUFHLENBQUNMLEdBQUdDLEVBQUMsRUFBR0ssT0FBTyxDQUFDLE1BQU0sTUFBTXpDLEtBQUssQ0FBQ29DLEVBQUU7SUFDekU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhZmlwb3J0cmFpdC1uZXh0anMvLi9zcmMvbGliL2ltYWdlLW9wdGltaXplci1zZXJ2ZXIudHM/ZjBlYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogU2VydmVyLXNpZGUgSW1hZ2UgT3B0aW1pemF0aW9uIFNlcnZpY2VcclxuICogSGFuZGxlcyBjb21wcmVzc2lvbiwgcmVzaXppbmcsIGFuZCBmb3JtYXQgY29udmVyc2lvbiBvbiB0aGUgc2VydmVyXHJcbiAqL1xyXG5cclxuaW1wb3J0IHNoYXJwIGZyb20gJ3NoYXJwJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW1pemVkSW1hZ2VzIHtcclxuICBvcmlnaW5hbDoge1xyXG4gICAgdXJsOiBzdHJpbmc7XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgaGVpZ2h0OiBudW1iZXI7XHJcbiAgfTtcclxuICB0aHVtYm5haWw6IHtcclxuICAgIHVybDogc3RyaW5nO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gIH07XHJcbiAgc21hbGw6IHtcclxuICAgIHVybDogc3RyaW5nO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gIH07XHJcbiAgbWVkaXVtOiB7XHJcbiAgICB1cmw6IHN0cmluZztcclxuICAgIHNpemU6IG51bWJlcjtcclxuICB9O1xyXG4gIGxhcmdlOiB7XHJcbiAgICB1cmw6IHN0cmluZztcclxuICAgIHNpemU6IG51bWJlcjtcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW1hZ2VPcHRpbWl6ZXJTZXJ2ZXIge1xyXG4gIHByaXZhdGUgc3VwYWJhc2U6IGFueTtcclxuICBwcml2YXRlIGJ1Y2tldE5hbWU6IHN0cmluZztcclxuXHJcbiAgY29uc3RydWN0b3Ioc3VwYWJhc2U6IGFueSwgYnVja2V0TmFtZTogc3RyaW5nID0gJ3Bob3RvcycpIHtcclxuICAgIHRoaXMuc3VwYWJhc2UgPSBzdXBhYmFzZTtcclxuICAgIHRoaXMuYnVja2V0TmFtZSA9IGJ1Y2tldE5hbWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZW5lcmF0ZSBmaWxlbmFtZSBmb3IgZGlmZmVyZW50IHNpemVzXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZW5lcmF0ZUZpbGVuYW1lKG9yaWdpbmFsTmFtZTogc3RyaW5nLCBzaXplOiBzdHJpbmcsIHRpbWVzdGFtcDogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGV4dCA9IG9yaWdpbmFsTmFtZS5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpIHx8ICdqcGcnO1xyXG4gICAgY29uc3QgbmFtZVdpdGhvdXRFeHQgPSBvcmlnaW5hbE5hbWUucmVwbGFjZSgvXFwuW14vLl0rJC8sICcnKTtcclxuICAgIGNvbnN0IGNsZWFuTmFtZSA9IG5hbWVXaXRob3V0RXh0LnJlcGxhY2UoL1teYS16QS1aMC05XS9nLCAnXycpO1xyXG4gICAgcmV0dXJuIGAke3RpbWVzdGFtcH1fJHtjbGVhbk5hbWV9XyR7c2l6ZX0uJHtleHR9YDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wdGltaXplIHNpbmdsZSBpbWFnZSB0byBzcGVjaWZpYyBzaXplXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhc3luYyBvcHRpbWl6ZUltYWdlKFxyXG4gICAgYnVmZmVyOiBCdWZmZXIsIFxyXG4gICAgd2lkdGg6IG51bWJlciwgXHJcbiAgICBoZWlnaHQ6IG51bWJlciwgXHJcbiAgICBxdWFsaXR5OiBudW1iZXJcclxuICApOiBQcm9taXNlPEJ1ZmZlcj4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHNoYXJwKGJ1ZmZlcilcclxuICAgICAgLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0LCB7XHJcbiAgICAgICAgZml0OiAnaW5zaWRlJyxcclxuICAgICAgICB3aXRob3V0RW5sYXJnZW1lbnQ6IHRydWUsXHJcbiAgICAgICAgYmFja2dyb3VuZDogeyByOiAyNTUsIGc6IDI1NSwgYjogMjU1LCBhbHBoYTogMSB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5qcGVnKHtcclxuICAgICAgICBxdWFsaXR5LFxyXG4gICAgICAgIHByb2dyZXNzaXZlOiB0cnVlLFxyXG4gICAgICAgIG1vempwZWc6IHRydWVcclxuICAgICAgfSlcclxuICAgICAgLnRvQnVmZmVyKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgaW1hZ2UgbWV0YWRhdGFcclxuICAgKi9cclxuICBwcml2YXRlIGFzeW5jIGdldEltYWdlTWV0YWRhdGEoYnVmZmVyOiBCdWZmZXIpIHtcclxuICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgc2hhcnAoYnVmZmVyKS5tZXRhZGF0YSgpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2lkdGg6IG1ldGFkYXRhLndpZHRoIHx8IDAsXHJcbiAgICAgIGhlaWdodDogbWV0YWRhdGEuaGVpZ2h0IHx8IDAsXHJcbiAgICAgIGZvcm1hdDogbWV0YWRhdGEuZm9ybWF0IHx8ICdqcGVnJyxcclxuICAgICAgc2l6ZTogYnVmZmVyLmxlbmd0aFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwbG9hZCBidWZmZXIgdG8gU3VwYWJhc2UgU3RvcmFnZVxyXG4gICAqL1xyXG4gIHByaXZhdGUgYXN5bmMgdXBsb2FkVG9TdG9yYWdlKFxyXG4gICAgYnVmZmVyOiBCdWZmZXIsIFxyXG4gICAgZmlsZVBhdGg6IHN0cmluZywgXHJcbiAgICBjb250ZW50VHlwZTogc3RyaW5nID0gJ2ltYWdlL2pwZWcnXHJcbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHRoaXMuc3VwYWJhc2Uuc3RvcmFnZVxyXG4gICAgICAuZnJvbSh0aGlzLmJ1Y2tldE5hbWUpXHJcbiAgICAgIC51cGxvYWQoZmlsZVBhdGgsIGJ1ZmZlciwge1xyXG4gICAgICAgIGNvbnRlbnRUeXBlLFxyXG4gICAgICAgIGNhY2hlQ29udHJvbDogJzMxNTM2MDAwJywgLy8gMSB5ZWFyIGNhY2hlXHJcbiAgICAgICAgdXBzZXJ0OiBmYWxzZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogcHVibGljVXJsRGF0YSB9ID0gdGhpcy5zdXBhYmFzZS5zdG9yYWdlXHJcbiAgICAgIC5mcm9tKHRoaXMuYnVja2V0TmFtZSlcclxuICAgICAgLmdldFB1YmxpY1VybChkYXRhLnBhdGgpO1xyXG5cclxuICAgIHJldHVybiBwdWJsaWNVcmxEYXRhLnB1YmxpY1VybDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByb2Nlc3MgYW5kIG9wdGltaXplIGltYWdlIGZvciBhbGwgc2l6ZXMgKFNFUlZFUi1TSURFIE9OTFkpXHJcbiAgICovXHJcbiAgYXN5bmMgcHJvY2Vzc0ltYWdlKFxyXG4gICAgYnVmZmVyOiBCdWZmZXIsIFxyXG4gICAgb3JpZ2luYWxOYW1lOiBzdHJpbmcsXHJcbiAgICBmb2xkZXI6IHN0cmluZyA9ICdvcHRpbWl6ZWQnXHJcbiAgKTogUHJvbWlzZTxPcHRpbWl6ZWRJbWFnZXM+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEdldCBvcmlnaW5hbCBtZXRhZGF0YVxyXG4gICAgICBjb25zdCBvcmlnaW5hbE1ldGFkYXRhID0gYXdhaXQgdGhpcy5nZXRJbWFnZU1ldGFkYXRhKGJ1ZmZlcik7XHJcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IHJhbmRvbUlkID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDgpO1xyXG5cclxuICAgICAgLy8gRGVmaW5lIHNpemVzXHJcbiAgICAgIGNvbnN0IHNpemVzID0ge1xyXG4gICAgICAgIHRodW1ibmFpbDogeyB3aWR0aDogMzAwLCBoZWlnaHQ6IDIyNSwgcXVhbGl0eTogODUgfSxcclxuICAgICAgICBzbWFsbDogeyB3aWR0aDogODAwLCBoZWlnaHQ6IDYwMCwgcXVhbGl0eTogOTAgfSxcclxuICAgICAgICBtZWRpdW06IHsgd2lkdGg6IDEyMDAsIGhlaWdodDogOTAwLCBxdWFsaXR5OiA5MiB9LFxyXG4gICAgICAgIGxhcmdlOiB7IHdpZHRoOiAxOTIwLCBoZWlnaHQ6IDE0NDAsIHF1YWxpdHk6IDk1IH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFVwbG9hZCBvcmlnaW5hbFxyXG4gICAgICBjb25zdCBvcmlnaW5hbFBhdGggPSBgJHtmb2xkZXJ9L29yaWdpbmFsLyR7dGltZXN0YW1wfV8ke3JhbmRvbUlkfV9vcmlnaW5hbC5qcGdgO1xyXG4gICAgICBjb25zdCBvcmlnaW5hbFVybCA9IGF3YWl0IHRoaXMudXBsb2FkVG9TdG9yYWdlKGJ1ZmZlciwgb3JpZ2luYWxQYXRoKTtcclxuXHJcbiAgICAgIC8vIFByb2Nlc3MgYW5kIHVwbG9hZCBvcHRpbWl6ZWQgdmVyc2lvbnNcclxuICAgICAgY29uc3QgcmVzdWx0czogT3B0aW1pemVkSW1hZ2VzID0ge1xyXG4gICAgICAgIG9yaWdpbmFsOiB7XHJcbiAgICAgICAgICB1cmw6IG9yaWdpbmFsVXJsLFxyXG4gICAgICAgICAgc2l6ZTogb3JpZ2luYWxNZXRhZGF0YS5zaXplLFxyXG4gICAgICAgICAgd2lkdGg6IG9yaWdpbmFsTWV0YWRhdGEud2lkdGgsXHJcbiAgICAgICAgICBoZWlnaHQ6IG9yaWdpbmFsTWV0YWRhdGEuaGVpZ2h0XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aHVtYm5haWw6IHsgdXJsOiAnJywgc2l6ZTogMCB9LFxyXG4gICAgICAgIHNtYWxsOiB7IHVybDogJycsIHNpemU6IDAgfSxcclxuICAgICAgICBtZWRpdW06IHsgdXJsOiAnJywgc2l6ZTogMCB9LFxyXG4gICAgICAgIGxhcmdlOiB7IHVybDogJycsIHNpemU6IDAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gUHJvY2VzcyBlYWNoIHNpemVcclxuICAgICAgZm9yIChjb25zdCBbc2l6ZU5hbWUsIGNvbmZpZ10gb2YgT2JqZWN0LmVudHJpZXMoc2l6ZXMpKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW1pemVkQnVmZmVyID0gYXdhaXQgdGhpcy5vcHRpbWl6ZUltYWdlKFxyXG4gICAgICAgICAgYnVmZmVyLFxyXG4gICAgICAgICAgY29uZmlnLndpZHRoLFxyXG4gICAgICAgICAgY29uZmlnLmhlaWdodCxcclxuICAgICAgICAgIGNvbmZpZy5xdWFsaXR5XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3Qgb3B0aW1pemVkUGF0aCA9IGAke2ZvbGRlcn0vJHtzaXplTmFtZX0vJHt0aW1lc3RhbXB9XyR7cmFuZG9tSWR9XyR7c2l6ZU5hbWV9LmpwZ2A7XHJcbiAgICAgICAgY29uc3Qgb3B0aW1pemVkVXJsID0gYXdhaXQgdGhpcy51cGxvYWRUb1N0b3JhZ2Uob3B0aW1pemVkQnVmZmVyLCBvcHRpbWl6ZWRQYXRoKTtcclxuXHJcbiAgICAgICAgcmVzdWx0c1tzaXplTmFtZSBhcyBrZXlvZiB0eXBlb2Ygc2l6ZXNdID0ge1xyXG4gICAgICAgICAgdXJsOiBvcHRpbWl6ZWRVcmwsXHJcbiAgICAgICAgICBzaXplOiBvcHRpbWl6ZWRCdWZmZXIubGVuZ3RoXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdJbWFnZSBwcm9jZXNzaW5nIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBpbWFnZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFwcHJvcHJpYXRlIGltYWdlIFVSTCBiYXNlZCBvbiB2aWV3cG9ydC91c2FnZVxyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRPcHRpbWFsSW1hZ2VVcmwoXHJcbiAgICBpbWFnZXM6IE9wdGltaXplZEltYWdlcywgXHJcbiAgICB1c2FnZTogJ3RodW1ibmFpbCcgfCAnZ2FsbGVyeScgfCAnbGlnaHRib3gnIHwgJ2Rvd25sb2FkJyB8ICdtb2JpbGUnXHJcbiAgKTogc3RyaW5nIHtcclxuICAgIHN3aXRjaCAodXNhZ2UpIHtcclxuICAgICAgY2FzZSAndGh1bWJuYWlsJzpcclxuICAgICAgICByZXR1cm4gaW1hZ2VzLnRodW1ibmFpbC51cmw7XHJcbiAgICAgIGNhc2UgJ2dhbGxlcnknOlxyXG4gICAgICAgIHJldHVybiBpbWFnZXMubWVkaXVtLnVybDtcclxuICAgICAgY2FzZSAnbGlnaHRib3gnOlxyXG4gICAgICAgIHJldHVybiBpbWFnZXMubGFyZ2UudXJsO1xyXG4gICAgICBjYXNlICdkb3dubG9hZCc6XHJcbiAgICAgICAgcmV0dXJuIGltYWdlcy5vcmlnaW5hbC51cmw7XHJcbiAgICAgIGNhc2UgJ21vYmlsZSc6XHJcbiAgICAgICAgcmV0dXJuIGltYWdlcy5zbWFsbC51cmw7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIGltYWdlcy5tZWRpdW0udXJsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHJlc3BvbnNpdmUgaW1hZ2Ugc291cmNlcyBmb3IgZGlmZmVyZW50IHNjcmVlbiBzaXplc1xyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRSZXNwb25zaXZlU291cmNlcyhpbWFnZXM6IE9wdGltaXplZEltYWdlcykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3JjU2V0OiBbXHJcbiAgICAgICAgYCR7aW1hZ2VzLnNtYWxsLnVybH0gODAwd2AsXHJcbiAgICAgICAgYCR7aW1hZ2VzLm1lZGl1bS51cmx9IDEyMDB3YCxcclxuICAgICAgICBgJHtpbWFnZXMubGFyZ2UudXJsfSAxOTIwd2BcclxuICAgICAgXS5qb2luKCcsICcpLFxyXG4gICAgICBzaXplczogW1xyXG4gICAgICAgICcobWF4LXdpZHRoOiA3NjhweCkgODAwcHgnLFxyXG4gICAgICAgICcobWF4LXdpZHRoOiAxMjAwcHgpIDEyMDBweCcsXHJcbiAgICAgICAgJzE5MjBweCdcclxuICAgICAgXS5qb2luKCcsICcpLFxyXG4gICAgICBzcmM6IGltYWdlcy5tZWRpdW0udXJsLCAvLyBGYWxsYmFja1xyXG4gICAgICBwbGFjZWhvbGRlcjogaW1hZ2VzLnRodW1ibmFpbC51cmxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWxjdWxhdGUgY29tcHJlc3Npb24gc2F2aW5nc1xyXG4gICAqL1xyXG4gIHN0YXRpYyBnZXRDb21wcmVzc2lvblN0YXRzKGltYWdlczogT3B0aW1pemVkSW1hZ2VzKSB7XHJcbiAgICBjb25zdCBvcmlnaW5hbFNpemUgPSBpbWFnZXMub3JpZ2luYWwuc2l6ZTtcclxuICAgIGNvbnN0IG9wdGltaXplZFNpemUgPSBpbWFnZXMubWVkaXVtLnNpemU7XHJcbiAgICBjb25zdCBzYXZpbmdzID0gKChvcmlnaW5hbFNpemUgLSBvcHRpbWl6ZWRTaXplKSAvIG9yaWdpbmFsU2l6ZSkgKiAxMDA7XHJcbiAgICBcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG9yaWdpbmFsU2l6ZTogdGhpcy5mb3JtYXRGaWxlU2l6ZShvcmlnaW5hbFNpemUpLFxyXG4gICAgICBvcHRpbWl6ZWRTaXplOiB0aGlzLmZvcm1hdEZpbGVTaXplKG9wdGltaXplZFNpemUpLFxyXG4gICAgICBzYXZpbmdzOiBNYXRoLnJvdW5kKHNhdmluZ3MpLFxyXG4gICAgICByYXRpbzogYCR7TWF0aC5yb3VuZChvcmlnaW5hbFNpemUgLyBvcHRpbWl6ZWRTaXplKX06MWBcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXQgZmlsZSBzaXplIGZvciBkaXNwbGF5XHJcbiAgICovXHJcbiAgc3RhdGljIGZvcm1hdEZpbGVTaXplKGJ5dGVzOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgaWYgKGJ5dGVzID09PSAwKSByZXR1cm4gJzAgQnl0ZXMnO1xyXG4gICAgY29uc3QgayA9IDEwMjQ7XHJcbiAgICBjb25zdCBzaXplcyA9IFsnQnl0ZXMnLCAnS0InLCAnTUInLCAnR0InXTtcclxuICAgIGNvbnN0IGkgPSBNYXRoLmZsb29yKE1hdGgubG9nKGJ5dGVzKSAvIE1hdGgubG9nKGspKTtcclxuICAgIHJldHVybiBwYXJzZUZsb2F0KChieXRlcyAvIE1hdGgucG93KGssIGkpKS50b0ZpeGVkKDIpKSArICcgJyArIHNpemVzW2ldO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJzaGFycCIsIkltYWdlT3B0aW1pemVyU2VydmVyIiwiY29uc3RydWN0b3IiLCJzdXBhYmFzZSIsImJ1Y2tldE5hbWUiLCJnZW5lcmF0ZUZpbGVuYW1lIiwib3JpZ2luYWxOYW1lIiwic2l6ZSIsInRpbWVzdGFtcCIsImV4dCIsInNwbGl0IiwicG9wIiwidG9Mb3dlckNhc2UiLCJuYW1lV2l0aG91dEV4dCIsInJlcGxhY2UiLCJjbGVhbk5hbWUiLCJvcHRpbWl6ZUltYWdlIiwiYnVmZmVyIiwid2lkdGgiLCJoZWlnaHQiLCJxdWFsaXR5IiwicmVzaXplIiwiZml0Iiwid2l0aG91dEVubGFyZ2VtZW50IiwiYmFja2dyb3VuZCIsInIiLCJnIiwiYiIsImFscGhhIiwianBlZyIsInByb2dyZXNzaXZlIiwibW96anBlZyIsInRvQnVmZmVyIiwiZ2V0SW1hZ2VNZXRhZGF0YSIsIm1ldGFkYXRhIiwiZm9ybWF0IiwibGVuZ3RoIiwidXBsb2FkVG9TdG9yYWdlIiwiZmlsZVBhdGgiLCJjb250ZW50VHlwZSIsImRhdGEiLCJlcnJvciIsInN0b3JhZ2UiLCJmcm9tIiwidXBsb2FkIiwiY2FjaGVDb250cm9sIiwidXBzZXJ0IiwicHVibGljVXJsRGF0YSIsImdldFB1YmxpY1VybCIsInBhdGgiLCJwdWJsaWNVcmwiLCJwcm9jZXNzSW1hZ2UiLCJmb2xkZXIiLCJvcmlnaW5hbE1ldGFkYXRhIiwiRGF0ZSIsIm5vdyIsInJhbmRvbUlkIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwic2l6ZXMiLCJ0aHVtYm5haWwiLCJzbWFsbCIsIm1lZGl1bSIsImxhcmdlIiwib3JpZ2luYWxQYXRoIiwib3JpZ2luYWxVcmwiLCJyZXN1bHRzIiwib3JpZ2luYWwiLCJ1cmwiLCJzaXplTmFtZSIsImNvbmZpZyIsIk9iamVjdCIsImVudHJpZXMiLCJvcHRpbWl6ZWRCdWZmZXIiLCJvcHRpbWl6ZWRQYXRoIiwib3B0aW1pemVkVXJsIiwiY29uc29sZSIsIkVycm9yIiwiZ2V0T3B0aW1hbEltYWdlVXJsIiwiaW1hZ2VzIiwidXNhZ2UiLCJnZXRSZXNwb25zaXZlU291cmNlcyIsInNyY1NldCIsImpvaW4iLCJzcmMiLCJwbGFjZWhvbGRlciIsImdldENvbXByZXNzaW9uU3RhdHMiLCJvcmlnaW5hbFNpemUiLCJvcHRpbWl6ZWRTaXplIiwic2F2aW5ncyIsImZvcm1hdEZpbGVTaXplIiwicm91bmQiLCJyYXRpbyIsImJ5dGVzIiwiayIsImkiLCJmbG9vciIsImxvZyIsInBhcnNlRmxvYXQiLCJwb3ciLCJ0b0ZpeGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/image-optimizer-server.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/supabase.ts":
/*!*****************************!*\
  !*** ./src/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   STORAGE_BUCKET: () => (/* binding */ STORAGE_BUCKET),\n/* harmony export */   deleteFile: () => (/* binding */ deleteFile),\n/* harmony export */   generateFilePath: () => (/* binding */ generateFilePath),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin),\n/* harmony export */   uploadFile: () => (/* binding */ uploadFile)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Create Supabase client for client-side operations\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://azspktldiblhrwebzmwq.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF6c3BrdGxkaWJsaHJ3ZWJ6bXdxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5NDQwNDQsImV4cCI6MjA2OTUyMDA0NH0.uKHB4K9hxUDTc0ZkwidCJv_Ev-oa99AflFvrFt_8MG8\");\n// Create Supabase admin client for server-side operations\n// Pastikan ini diekspor langsung agar 'database' bisa menggunakannya\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://azspktldiblhrwebzmwq.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n// Storage bucket name\nconst STORAGE_BUCKET = process.env.SUPABASE_STORAGE_BUCKET || \"photos\"; // Menggunakan default 'photos'\n// Upload file to Supabase Storage\nasync function uploadFile(file, path) {\n    const { data, error } = await supabaseAdmin.storage.from(STORAGE_BUCKET).upload(path, file, {\n        cacheControl: \"3600\",\n        upsert: false\n    });\n    if (error) {\n        throw new Error(`Upload failed: ${error.message}`);\n    }\n    // Get public URL\n    const { data: publicUrlData } = supabaseAdmin.storage.from(STORAGE_BUCKET).getPublicUrl(data.path);\n    return publicUrlData.publicUrl;\n}\n// Delete file from Supabase Storage\nasync function deleteFile(path) {\n    const { error } = await supabaseAdmin.storage.from(STORAGE_BUCKET).remove([\n        path\n    ]);\n    if (error) {\n        throw new Error(`Delete failed: ${error.message}`);\n    }\n}\n// Generate unique file path\nfunction generateFilePath(folder, originalName, eventId) {\n    const timestamp = Date.now();\n    const randomStr = Math.random().toString(36).substring(2, 8);\n    const fileExtension = originalName.split(\".\").pop();\n    const fileName = `${timestamp}_${randomStr}.${fileExtension}`;\n    if (eventId) {\n        return `${folder}/${eventId}/${fileName}`;\n    }\n    return `${folder}/${fileName}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBcUQ7QUFFckQsb0RBQW9EO0FBQzdDLE1BQU1DLFdBQVdELG1FQUFZQSxDQUNsQ0UsMENBQW9DLEVBQ3BDQSxrTkFBeUMsRUFDekM7QUFFRiwwREFBMEQ7QUFDMUQscUVBQXFFO0FBQzlELE1BQU1JLGdCQUFnQk4sbUVBQVlBLENBQ3ZDRSwwQ0FBb0MsRUFDcENBLFFBQVFDLEdBQUcsQ0FBQ0kseUJBQXlCLEVBQ3JDO0lBQ0VDLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNBO0FBRUYsc0JBQXNCO0FBQ2YsTUFBTUMsaUJBQWlCVCxRQUFRQyxHQUFHLENBQUNTLHVCQUF1QixJQUFJLFNBQVMsQ0FBQywrQkFBK0I7QUFFOUcsa0NBQWtDO0FBQzNCLGVBQWVDLFdBQVdDLElBQVUsRUFBRUMsSUFBWTtJQUN2RCxNQUFNLEVBQUVDLElBQUksRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTVgsY0FBY1ksT0FBTyxDQUNoREMsSUFBSSxDQUFDUixnQkFDTFMsTUFBTSxDQUFDTCxNQUFNRCxNQUFNO1FBQ2xCTyxjQUFjO1FBQ2RDLFFBQVE7SUFDVjtJQUVGLElBQUlMLE9BQU87UUFDVCxNQUFNLElBQUlNLE1BQU0sQ0FBQyxlQUFlLEVBQUVOLE1BQU1PLE9BQU8sQ0FBQyxDQUFDO0lBQ25EO0lBRUEsaUJBQWlCO0lBQ2pCLE1BQU0sRUFBRVIsTUFBTVMsYUFBYSxFQUFFLEdBQUduQixjQUFjWSxPQUFPLENBQ2xEQyxJQUFJLENBQUNSLGdCQUNMZSxZQUFZLENBQUNWLEtBQUtELElBQUk7SUFFekIsT0FBT1UsY0FBY0UsU0FBUztBQUNoQztBQUVBLG9DQUFvQztBQUM3QixlQUFlQyxXQUFXYixJQUFZO0lBQzNDLE1BQU0sRUFBRUUsS0FBSyxFQUFFLEdBQUcsTUFBTVgsY0FBY1ksT0FBTyxDQUMxQ0MsSUFBSSxDQUFDUixnQkFDTGtCLE1BQU0sQ0FBQztRQUFDZDtLQUFLO0lBRWhCLElBQUlFLE9BQU87UUFDVCxNQUFNLElBQUlNLE1BQU0sQ0FBQyxlQUFlLEVBQUVOLE1BQU1PLE9BQU8sQ0FBQyxDQUFDO0lBQ25EO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDckIsU0FBU00saUJBQ2RDLE1BQWMsRUFDZEMsWUFBb0IsRUFDcEJDLE9BQWdCO0lBRWhCLE1BQU1DLFlBQVlDLEtBQUtDLEdBQUc7SUFDMUIsTUFBTUMsWUFBWUMsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUc7SUFDMUQsTUFBTUMsZ0JBQWdCVixhQUFhVyxLQUFLLENBQUMsS0FBS0MsR0FBRztJQUNqRCxNQUFNQyxXQUFXLENBQUMsRUFBRVgsVUFBVSxDQUFDLEVBQUVHLFVBQVUsQ0FBQyxFQUFFSyxjQUFjLENBQUM7SUFFN0QsSUFBSVQsU0FBUztRQUNYLE9BQU8sQ0FBQyxFQUFFRixPQUFPLENBQUMsRUFBRUUsUUFBUSxDQUFDLEVBQUVZLFNBQVMsQ0FBQztJQUMzQztJQUVBLE9BQU8sQ0FBQyxFQUFFZCxPQUFPLENBQUMsRUFBRWMsU0FBUyxDQUFDO0FBQ2hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFmaXBvcnRyYWl0LW5leHRqcy8uL3NyYy9saWIvc3VwYWJhc2UudHM/MDZlMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuXG4vLyBDcmVhdGUgU3VwYWJhc2UgY2xpZW50IGZvciBjbGllbnQtc2lkZSBvcGVyYXRpb25zXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuKTtcblxuLy8gQ3JlYXRlIFN1cGFiYXNlIGFkbWluIGNsaWVudCBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9uc1xuLy8gUGFzdGlrYW4gaW5pIGRpZWtzcG9yIGxhbmdzdW5nIGFnYXIgJ2RhdGFiYXNlJyBiaXNhIG1lbmdndW5ha2FubnlhXG5leHBvcnQgY29uc3Qgc3VwYWJhc2VBZG1pbiA9IGNyZWF0ZUNsaWVudChcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSEsXG4gIHtcbiAgICBhdXRoOiB7XG4gICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxuICAgIH1cbiAgfVxuKTtcblxuLy8gU3RvcmFnZSBidWNrZXQgbmFtZVxuZXhwb3J0IGNvbnN0IFNUT1JBR0VfQlVDS0VUID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU1RPUkFHRV9CVUNLRVQgfHwgJ3Bob3Rvcyc7IC8vIE1lbmdndW5ha2FuIGRlZmF1bHQgJ3Bob3RvcydcblxuLy8gVXBsb2FkIGZpbGUgdG8gU3VwYWJhc2UgU3RvcmFnZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZEZpbGUoZmlsZTogRmlsZSwgcGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5zdG9yYWdlXG4gICAgLmZyb20oU1RPUkFHRV9CVUNLRVQpXG4gICAgLnVwbG9hZChwYXRoLCBmaWxlLCB7XG4gICAgICBjYWNoZUNvbnRyb2w6ICczNjAwJyxcbiAgICAgIHVwc2VydDogZmFsc2VcbiAgICB9KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVwbG9hZCBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgfVxuXG4gIC8vIEdldCBwdWJsaWMgVVJMXG4gIGNvbnN0IHsgZGF0YTogcHVibGljVXJsRGF0YSB9ID0gc3VwYWJhc2VBZG1pbi5zdG9yYWdlXG4gICAgLmZyb20oU1RPUkFHRV9CVUNLRVQpXG4gICAgLmdldFB1YmxpY1VybChkYXRhLnBhdGgpO1xuXG4gIHJldHVybiBwdWJsaWNVcmxEYXRhLnB1YmxpY1VybDtcbn1cblxuLy8gRGVsZXRlIGZpbGUgZnJvbSBTdXBhYmFzZSBTdG9yYWdlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRmlsZShwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5zdG9yYWdlXG4gICAgLmZyb20oU1RPUkFHRV9CVUNLRVQpXG4gICAgLnJlbW92ZShbcGF0aF0pO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihgRGVsZXRlIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8vIEdlbmVyYXRlIHVuaXF1ZSBmaWxlIHBhdGhcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVQYXRoKFxuICBmb2xkZXI6IHN0cmluZywgXG4gIG9yaWdpbmFsTmFtZTogc3RyaW5nLCBcbiAgZXZlbnRJZD86IHN0cmluZ1xuKTogc3RyaW5nIHtcbiAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgcmFuZG9tU3RyID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDgpO1xuICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gb3JpZ2luYWxOYW1lLnNwbGl0KCcuJykucG9wKCk7XG4gIGNvbnN0IGZpbGVOYW1lID0gYCR7dGltZXN0YW1wfV8ke3JhbmRvbVN0cn0uJHtmaWxlRXh0ZW5zaW9ufWA7XG4gIFxuICBpZiAoZXZlbnRJZCkge1xuICAgIHJldHVybiBgJHtmb2xkZXJ9LyR7ZXZlbnRJZH0vJHtmaWxlTmFtZX1gO1xuICB9XG4gIFxuICByZXR1cm4gYCR7Zm9sZGVyfS8ke2ZpbGVOYW1lfWA7XG59ICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlQWRtaW4iLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsIlNUT1JBR0VfQlVDS0VUIiwiU1VQQUJBU0VfU1RPUkFHRV9CVUNLRVQiLCJ1cGxvYWRGaWxlIiwiZmlsZSIsInBhdGgiLCJkYXRhIiwiZXJyb3IiLCJzdG9yYWdlIiwiZnJvbSIsInVwbG9hZCIsImNhY2hlQ29udHJvbCIsInVwc2VydCIsIkVycm9yIiwibWVzc2FnZSIsInB1YmxpY1VybERhdGEiLCJnZXRQdWJsaWNVcmwiLCJwdWJsaWNVcmwiLCJkZWxldGVGaWxlIiwicmVtb3ZlIiwiZ2VuZXJhdGVGaWxlUGF0aCIsImZvbGRlciIsIm9yaWdpbmFsTmFtZSIsImV2ZW50SWQiLCJ0aW1lc3RhbXAiLCJEYXRlIiwibm93IiwicmFuZG9tU3RyIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZmlsZUV4dGVuc2lvbiIsInNwbGl0IiwicG9wIiwiZmlsZU5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/isows"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fevents%2Froute&page=%2Fapi%2Fadmin%2Fevents%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fevents%2Froute.ts&appDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CAdministrator%5Cnana-cursor-admin-dashboard-gallery-feature-enhancement-a647%5Chafi-portrait-stable&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();