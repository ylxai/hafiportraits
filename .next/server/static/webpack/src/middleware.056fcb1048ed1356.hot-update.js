"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("src/middleware",{

/***/ "(middleware)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   cleanupExpiredSessions: () => (/* binding */ cleanupExpiredSessions),\n/* harmony export */   createDefaultAdminUsers: () => (/* binding */ createDefaultAdminUsers),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   destroySession: () => (/* binding */ destroySession),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   hasPermission: () => (/* binding */ hasPermission),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   initializeAuth: () => (/* binding */ initializeAuth),\n/* harmony export */   logActivity: () => (/* binding */ logActivity),\n/* harmony export */   validateSession: () => (/* binding */ validateSession),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(middleware)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(middleware)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(middleware)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/**\n * Authentication Utilities\n * HafiPortrait Admin Authentication System\n */ \n\n\n// Create Supabase client with service role key for admin operations\nconst supabaseUrl = \"https://azspktldiblhrwebzmwq.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseServiceKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\nconst JWT_SECRET = process.env.JWT_SECRET || \"hafiportrait-secret-key-change-in-production\";\nconst SESSION_DURATION = 24 * 60 * 60 * 1000; // 24 hours\n/**\n * Hash password using bcrypt\n */ async function hashPassword(password) {\n    const saltRounds = 12;\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].hash(password, saltRounds);\n}\n/**\n * Verify password against hash\n */ async function verifyPassword(password, hash) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].compare(password, hash);\n}\n/**\n * Generate JWT token\n */ function generateToken(userId, username) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n        userId,\n        username\n    }, JWT_SECRET, {\n        expiresIn: \"24h\"\n    });\n}\n/**\n * Verify JWT token\n */ function verifyToken(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n        return {\n            userId: decoded.userId,\n            username: decoded.username\n        };\n    } catch (error) {\n        return null;\n    }\n}\n/**\n * Create admin users with hashed passwords\n */ async function createDefaultAdminUsers() {\n    const defaultUsers = [\n        {\n            username: \"hafi\",\n            password: \"Hantu@112233\",\n            email: \"hafi@hafiportrait.com\",\n            full_name: \"Hafi Portrait\"\n        },\n        {\n            username: \"nandika\",\n            password: \"Hantu@112233\",\n            email: \"nandika@hafiportrait.com\",\n            full_name: \"Nandika\"\n        }\n    ];\n    for (const user of defaultUsers){\n        try {\n            // Check if user already exists\n            const { data: existingUser } = await supabase.from(\"admin_users\").select(\"id\").eq(\"username\", user.username).single();\n            if (!existingUser) {\n                const hashedPassword = await hashPassword(user.password);\n                const { error } = await supabase.from(\"admin_users\").insert({\n                    username: user.username,\n                    password_hash: hashedPassword,\n                    email: user.email,\n                    full_name: user.full_name,\n                    role: \"superadmin\"\n                });\n                if (error) {\n                    console.error(`Error creating user ${user.username}:`, error);\n                } else {\n                    console.log(`✅ Created superadmin user: ${user.username}`);\n                }\n            } else {\n                console.log(`ℹ️ User ${user.username} already exists`);\n            }\n        } catch (error) {\n            console.error(`Error processing user ${user.username}:`, error);\n        }\n    }\n}\n/**\n * Authenticate user with username and password\n */ async function authenticateUser(credentials) {\n    try {\n        const { data: user, error } = await supabase.from(\"admin_users\").select(\"*\").eq(\"username\", credentials.username).eq(\"is_active\", true).single();\n        if (error || !user) {\n            return null;\n        }\n        const isValidPassword = await verifyPassword(credentials.password, user.password_hash);\n        if (!isValidPassword) {\n            return null;\n        }\n        // Update last login\n        await supabase.from(\"admin_users\").update({\n            last_login: new Date().toISOString()\n        }).eq(\"id\", user.id);\n        // Return user without password hash\n        const { password_hash, ...userWithoutPassword } = user;\n        return userWithoutPassword;\n    } catch (error) {\n        console.error(\"Authentication error:\", error);\n        return null;\n    }\n}\n/**\n * Create session for authenticated user\n */ async function createSession(userId, ipAddress, userAgent) {\n    const sessionId = generateSessionId();\n    const expiresAt = new Date(Date.now() + SESSION_DURATION).toISOString();\n    const { error } = await supabase.from(\"admin_sessions\").insert({\n        id: sessionId,\n        user_id: userId,\n        expires_at: expiresAt,\n        ip_address: ipAddress,\n        user_agent: userAgent\n    });\n    if (error) {\n        throw new Error(\"Failed to create session\");\n    }\n    return sessionId;\n}\n/**\n * Validate session\n */ async function validateSession(sessionId) {\n    try {\n        const { data: session, error } = await supabase.from(\"admin_sessions\").select(`\n        *,\n        admin_users (\n          id, username, email, full_name, role, is_active, last_login, created_at\n        )\n      `).eq(\"id\", sessionId).gt(\"expires_at\", new Date().toISOString()).single();\n        if (error || !session || !session.admin_users) {\n            return null;\n        }\n        return session.admin_users;\n    } catch (error) {\n        console.error(\"Session validation error:\", error);\n        return null;\n    }\n}\n/**\n * Destroy session (logout)\n */ async function destroySession(sessionId) {\n    await supabase.from(\"admin_sessions\").delete().eq(\"id\", sessionId);\n}\n/**\n * Clean up expired sessions\n */ async function cleanupExpiredSessions() {\n    await supabase.from(\"admin_sessions\").delete().lt(\"expires_at\", new Date().toISOString());\n}\n/**\n * Log admin activity\n */ async function logActivity(userId, action, resource, resourceId, details, ipAddress, userAgent) {\n    try {\n        await supabase.from(\"admin_activity_logs\").insert({\n            user_id: userId,\n            action,\n            resource,\n            resource_id: resourceId,\n            details,\n            ip_address: ipAddress,\n            user_agent: userAgent\n        });\n    } catch (error) {\n        console.error(\"Failed to log activity:\", error);\n    }\n}\n/**\n * Generate secure session ID\n */ function generateSessionId() {\n    return `sess_${Date.now()}_${Math.random().toString(36).substring(2, 15)}`;\n}\n/**\n * Get user by ID\n */ async function getUserById(userId) {\n    try {\n        const { data: user, error } = await supabase.from(\"admin_users\").select(\"id, username, email, full_name, role, is_active, last_login, created_at\").eq(\"id\", userId).eq(\"is_active\", true).single();\n        if (error || !user) {\n            return null;\n        }\n        return user;\n    } catch (error) {\n        console.error(\"Get user error:\", error);\n        return null;\n    }\n}\n/**\n * Check if user has permission\n */ function hasPermission(user, permission) {\n    // Superadmin has all permissions\n    if (user.role === \"superadmin\") {\n        return true;\n    }\n    // Add more role-based permissions here if needed\n    return false;\n}\n/**\n * Initialize authentication system\n */ async function initializeAuth() {\n    try {\n        console.log(\"\\uD83D\\uDD10 Initializing authentication system...\");\n        // Create default admin users\n        await createDefaultAdminUsers();\n        // Clean up expired sessions\n        await cleanupExpiredSessions();\n        console.log(\"✅ Authentication system initialized\");\n    } catch (error) {\n        console.error(\"❌ Failed to initialize authentication:\", error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d2VicGFjazovL19OX0UvLi9zcmMvbGliL2F1dGgudHM/NjY5MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEF1dGhlbnRpY2F0aW9uIFV0aWxpdGllc1xuICogSGFmaVBvcnRyYWl0IEFkbWluIEF1dGhlbnRpY2F0aW9uIFN5c3RlbVxuICovXG5cbmltcG9ydCBiY3J5cHQgZnJvbSAnYmNyeXB0anMnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gQ3JlYXRlIFN1cGFiYXNlIGNsaWVudCB3aXRoIHNlcnZpY2Ugcm9sZSBrZXkgZm9yIGFkbWluIG9wZXJhdGlvbnNcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMITtcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkhO1xuXG5jb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXksIHtcbiAgYXV0aDoge1xuICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxuICB9XG59KTtcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJ2hhZmlwb3J0cmFpdC1zZWNyZXQta2V5LWNoYW5nZS1pbi1wcm9kdWN0aW9uJztcbmNvbnN0IFNFU1NJT05fRFVSQVRJT04gPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyAyNCBob3Vyc1xuXG5leHBvcnQgaW50ZXJmYWNlIEFkbWluVXNlciB7XG4gIGlkOiBudW1iZXI7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIGZ1bGxfbmFtZTogc3RyaW5nO1xuICByb2xlOiBzdHJpbmc7XG4gIGlzX2FjdGl2ZTogYm9vbGVhbjtcbiAgbGFzdF9sb2dpbjogc3RyaW5nIHwgbnVsbDtcbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIExvZ2luQ3JlZGVudGlhbHMge1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhTZXNzaW9uIHtcbiAgaWQ6IHN0cmluZztcbiAgdXNlcl9pZDogbnVtYmVyO1xuICBleHBpcmVzX2F0OiBzdHJpbmc7XG4gIGlwX2FkZHJlc3M/OiBzdHJpbmc7XG4gIHVzZXJfYWdlbnQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogSGFzaCBwYXNzd29yZCB1c2luZyBiY3J5cHRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEyO1xuICByZXR1cm4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xufVxuXG4vKipcbiAqIFZlcmlmeSBwYXNzd29yZCBhZ2FpbnN0IGhhc2hcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2g6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIEpXVCB0b2tlblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VySWQ6IG51bWJlciwgdXNlcm5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBqd3Quc2lnbihcbiAgICB7IHVzZXJJZCwgdXNlcm5hbWUgfSxcbiAgICBKV1RfU0VDUkVULFxuICAgIHsgZXhwaXJlc0luOiAnMjRoJyB9XG4gICk7XG59XG5cbi8qKlxuICogVmVyaWZ5IEpXVCB0b2tlblxuICovXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IHsgdXNlcklkOiBudW1iZXI7IHVzZXJuYW1lOiBzdHJpbmcgfSB8IG51bGwge1xuICB0cnkge1xuICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyBhbnk7XG4gICAgcmV0dXJuIHsgdXNlcklkOiBkZWNvZGVkLnVzZXJJZCwgdXNlcm5hbWU6IGRlY29kZWQudXNlcm5hbWUgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhZG1pbiB1c2VycyB3aXRoIGhhc2hlZCBwYXNzd29yZHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRBZG1pblVzZXJzKCk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBkZWZhdWx0VXNlcnMgPSBbXG4gICAge1xuICAgICAgdXNlcm5hbWU6ICdoYWZpJyxcbiAgICAgIHBhc3N3b3JkOiAnSGFudHVAMTEyMjMzJyxcbiAgICAgIGVtYWlsOiAnaGFmaUBoYWZpcG9ydHJhaXQuY29tJyxcbiAgICAgIGZ1bGxfbmFtZTogJ0hhZmkgUG9ydHJhaXQnXG4gICAgfSxcbiAgICB7XG4gICAgICB1c2VybmFtZTogJ25hbmRpa2EnLFxuICAgICAgcGFzc3dvcmQ6ICdIYW50dUAxMTIyMzMnLFxuICAgICAgZW1haWw6ICduYW5kaWthQGhhZmlwb3J0cmFpdC5jb20nLFxuICAgICAgZnVsbF9uYW1lOiAnTmFuZGlrYSdcbiAgICB9XG4gIF07XG5cbiAgZm9yIChjb25zdCB1c2VyIG9mIGRlZmF1bHRVc2Vycykge1xuICAgIHRyeSB7XG4gICAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgZXhpc3RzXG4gICAgICBjb25zdCB7IGRhdGE6IGV4aXN0aW5nVXNlciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2FkbWluX3VzZXJzJylcbiAgICAgICAgLnNlbGVjdCgnaWQnKVxuICAgICAgICAuZXEoJ3VzZXJuYW1lJywgdXNlci51c2VybmFtZSlcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgICAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGhhc2hQYXNzd29yZCh1c2VyLnBhc3N3b3JkKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2FkbWluX3VzZXJzJylcbiAgICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmRfaGFzaDogaGFzaGVkUGFzc3dvcmQsXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICAgIGZ1bGxfbmFtZTogdXNlci5mdWxsX25hbWUsXG4gICAgICAgICAgICByb2xlOiAnc3VwZXJhZG1pbidcbiAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyB1c2VyICR7dXNlci51c2VybmFtZX06YCwgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgQ3JlYXRlZCBzdXBlcmFkbWluIHVzZXI6ICR7dXNlci51c2VybmFtZX1gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYOKEue+4jyBVc2VyICR7dXNlci51c2VybmFtZX0gYWxyZWFkeSBleGlzdHNgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyB1c2VyICR7dXNlci51c2VybmFtZX06YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEF1dGhlbnRpY2F0ZSB1c2VyIHdpdGggdXNlcm5hbWUgYW5kIHBhc3N3b3JkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyKGNyZWRlbnRpYWxzOiBMb2dpbkNyZWRlbnRpYWxzKTogUHJvbWlzZTxBZG1pblVzZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiB1c2VyLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhZG1pbl91c2VycycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgndXNlcm5hbWUnLCBjcmVkZW50aWFscy51c2VybmFtZSlcbiAgICAgIC5lcSgnaXNfYWN0aXZlJywgdHJ1ZSlcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvciB8fCAhdXNlcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgaXNWYWxpZFBhc3N3b3JkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQoY3JlZGVudGlhbHMucGFzc3dvcmQsIHVzZXIucGFzc3dvcmRfaGFzaCk7XG4gICAgaWYgKCFpc1ZhbGlkUGFzc3dvcmQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBsYXN0IGxvZ2luXG4gICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhZG1pbl91c2VycycpXG4gICAgICAudXBkYXRlKHsgbGFzdF9sb2dpbjogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pXG4gICAgICAuZXEoJ2lkJywgdXNlci5pZCk7XG5cbiAgICAvLyBSZXR1cm4gdXNlciB3aXRob3V0IHBhc3N3b3JkIGhhc2hcbiAgICBjb25zdCB7IHBhc3N3b3JkX2hhc2gsIC4uLnVzZXJXaXRob3V0UGFzc3dvcmQgfSA9IHVzZXI7XG4gICAgcmV0dXJuIHVzZXJXaXRob3V0UGFzc3dvcmQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIHNlc3Npb24gZm9yIGF1dGhlbnRpY2F0ZWQgdXNlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbihcbiAgdXNlcklkOiBudW1iZXIsIFxuICBpcEFkZHJlc3M/OiBzdHJpbmcsIFxuICB1c2VyQWdlbnQ/OiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHNlc3Npb25JZCA9IGdlbmVyYXRlU2Vzc2lvbklkKCk7XG4gIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBTRVNTSU9OX0RVUkFUSU9OKS50b0lTT1N0cmluZygpO1xuXG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ2FkbWluX3Nlc3Npb25zJylcbiAgICAuaW5zZXJ0KHtcbiAgICAgIGlkOiBzZXNzaW9uSWQsXG4gICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICBleHBpcmVzX2F0OiBleHBpcmVzQXQsXG4gICAgICBpcF9hZGRyZXNzOiBpcEFkZHJlc3MsXG4gICAgICB1c2VyX2FnZW50OiB1c2VyQWdlbnRcbiAgICB9KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgc2Vzc2lvbicpO1xuICB9XG5cbiAgcmV0dXJuIHNlc3Npb25JZDtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBzZXNzaW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVNlc3Npb24oc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPEFkbWluVXNlciB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHNlc3Npb24sIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2FkbWluX3Nlc3Npb25zJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICAqLFxuICAgICAgICBhZG1pbl91c2VycyAoXG4gICAgICAgICAgaWQsIHVzZXJuYW1lLCBlbWFpbCwgZnVsbF9uYW1lLCByb2xlLCBpc19hY3RpdmUsIGxhc3RfbG9naW4sIGNyZWF0ZWRfYXRcbiAgICAgICAgKVxuICAgICAgYClcbiAgICAgIC5lcSgnaWQnLCBzZXNzaW9uSWQpXG4gICAgICAuZ3QoJ2V4cGlyZXNfYXQnLCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IgfHwgIXNlc3Npb24gfHwgIXNlc3Npb24uYWRtaW5fdXNlcnMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBzZXNzaW9uLmFkbWluX3VzZXJzIGFzIEFkbWluVXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTZXNzaW9uIHZhbGlkYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogRGVzdHJveSBzZXNzaW9uIChsb2dvdXQpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXN0cm95U2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdhZG1pbl9zZXNzaW9ucycpXG4gICAgLmRlbGV0ZSgpXG4gICAgLmVxKCdpZCcsIHNlc3Npb25JZCk7XG59XG5cbi8qKlxuICogQ2xlYW4gdXAgZXhwaXJlZCBzZXNzaW9uc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYW51cEV4cGlyZWRTZXNzaW9ucygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgYXdhaXQgc3VwYWJhc2VcbiAgICAuZnJvbSgnYWRtaW5fc2Vzc2lvbnMnKVxuICAgIC5kZWxldGUoKVxuICAgIC5sdCgnZXhwaXJlc19hdCcsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogTG9nIGFkbWluIGFjdGl2aXR5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dBY3Rpdml0eShcbiAgdXNlcklkOiBudW1iZXIsXG4gIGFjdGlvbjogc3RyaW5nLFxuICByZXNvdXJjZT86IHN0cmluZyxcbiAgcmVzb3VyY2VJZD86IHN0cmluZyxcbiAgZGV0YWlscz86IGFueSxcbiAgaXBBZGRyZXNzPzogc3RyaW5nLFxuICB1c2VyQWdlbnQ/OiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnYWRtaW5fYWN0aXZpdHlfbG9ncycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBhY3Rpb24sXG4gICAgICAgIHJlc291cmNlLFxuICAgICAgICByZXNvdXJjZV9pZDogcmVzb3VyY2VJZCxcbiAgICAgICAgZGV0YWlscyxcbiAgICAgICAgaXBfYWRkcmVzczogaXBBZGRyZXNzLFxuICAgICAgICB1c2VyX2FnZW50OiB1c2VyQWdlbnRcbiAgICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgYWN0aXZpdHk6JywgZXJyb3IpO1xuICB9XG59XG5cbi8qKlxuICogR2VuZXJhdGUgc2VjdXJlIHNlc3Npb24gSURcbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVTZXNzaW9uSWQoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBzZXNzXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpfWA7XG59XG5cbi8qKlxuICogR2V0IHVzZXIgYnkgSURcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUlkKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxBZG1pblVzZXIgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiB1c2VyLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhZG1pbl91c2VycycpXG4gICAgICAuc2VsZWN0KCdpZCwgdXNlcm5hbWUsIGVtYWlsLCBmdWxsX25hbWUsIHJvbGUsIGlzX2FjdGl2ZSwgbGFzdF9sb2dpbiwgY3JlYXRlZF9hdCcpXG4gICAgICAuZXEoJ2lkJywgdXNlcklkKVxuICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yIHx8ICF1c2VyKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdHZXQgdXNlciBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiB1c2VyIGhhcyBwZXJtaXNzaW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHVzZXI6IEFkbWluVXNlciwgcGVybWlzc2lvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIFN1cGVyYWRtaW4gaGFzIGFsbCBwZXJtaXNzaW9uc1xuICBpZiAodXNlci5yb2xlID09PSAnc3VwZXJhZG1pbicpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIEFkZCBtb3JlIHJvbGUtYmFzZWQgcGVybWlzc2lvbnMgaGVyZSBpZiBuZWVkZWRcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEluaXRpYWxpemUgYXV0aGVudGljYXRpb24gc3lzdGVtXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQXV0aCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+UkCBJbml0aWFsaXppbmcgYXV0aGVudGljYXRpb24gc3lzdGVtLi4uJyk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgYWRtaW4gdXNlcnNcbiAgICBhd2FpdCBjcmVhdGVEZWZhdWx0QWRtaW5Vc2VycygpO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIGV4cGlyZWQgc2Vzc2lvbnNcbiAgICBhd2FpdCBjbGVhbnVwRXhwaXJlZFNlc3Npb25zKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ+KchSBBdXRoZW50aWNhdGlvbiBzeXN0ZW0gaW5pdGlhbGl6ZWQnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGluaXRpYWxpemUgYXV0aGVudGljYXRpb246JywgZXJyb3IpO1xuICB9XG59Il0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJzdXBhYmFzZUFkbWluIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsIkpXVF9TRUNSRVQiLCJTRVNTSU9OX0RVUkFUSU9OIiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0Um91bmRzIiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsImdlbmVyYXRlVG9rZW4iLCJ1c2VySWQiLCJ1c2VybmFtZSIsInNpZ24iLCJleHBpcmVzSW4iLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwiZGVjb2RlZCIsInZlcmlmeSIsImVycm9yIiwiY3JlYXRlRGVmYXVsdEFkbWluVXNlcnMiLCJkZWZhdWx0VXNlcnMiLCJlbWFpbCIsImZ1bGxfbmFtZSIsInVzZXIiLCJkYXRhIiwiZXhpc3RpbmdVc2VyIiwic3VwYWJhc2UiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJoYXNoZWRQYXNzd29yZCIsImluc2VydCIsInBhc3N3b3JkX2hhc2giLCJyb2xlIiwiY29uc29sZSIsImxvZyIsImF1dGhlbnRpY2F0ZVVzZXIiLCJjcmVkZW50aWFscyIsImlzVmFsaWRQYXNzd29yZCIsInVwZGF0ZSIsImxhc3RfbG9naW4iLCJEYXRlIiwidG9JU09TdHJpbmciLCJpZCIsInVzZXJXaXRob3V0UGFzc3dvcmQiLCJjcmVhdGVTZXNzaW9uIiwiaXBBZGRyZXNzIiwidXNlckFnZW50Iiwic2Vzc2lvbklkIiwiZ2VuZXJhdGVTZXNzaW9uSWQiLCJleHBpcmVzQXQiLCJub3ciLCJ1c2VyX2lkIiwiZXhwaXJlc19hdCIsImlwX2FkZHJlc3MiLCJ1c2VyX2FnZW50IiwiRXJyb3IiLCJ2YWxpZGF0ZVNlc3Npb24iLCJzZXNzaW9uIiwiZ3QiLCJhZG1pbl91c2VycyIsImRlc3Ryb3lTZXNzaW9uIiwiZGVsZXRlIiwiY2xlYW51cEV4cGlyZWRTZXNzaW9ucyIsImx0IiwibG9nQWN0aXZpdHkiLCJhY3Rpb24iLCJyZXNvdXJjZSIsInJlc291cmNlSWQiLCJkZXRhaWxzIiwicmVzb3VyY2VfaWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJnZXRVc2VyQnlJZCIsImhhc1Blcm1pc3Npb24iLCJwZXJtaXNzaW9uIiwiaW5pdGlhbGl6ZUF1dGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/lib/auth.ts\n");

/***/ })

});